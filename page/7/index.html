<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  
  <title>Fasih Khatib</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Fasih Khatib">
<meta property="og:url" content="http://fasihkhatib.com/page/7/index.html">
<meta property="og:site_name" content="Fasih Khatib">
<meta property="og:locale">
<meta property="article:author" content="Fasih Khatib">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Fasih Khatib" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Fasih Khatib</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About Me</a>
        
          <a class="main-nav-link" href="/principles">Guiding Principles</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://fasihkhatib.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-scalaz-optionops" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/04/scalaz-optionops/" class="article-date">
  <time datetime="2017-07-04T10:50:10.000Z" itemprop="datePublished">2017-07-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/04/scalaz-optionops/">Scalaz OptionOps</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll look at <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/c0e4b531847348e1fd533c7d3605fe69320dde91/core/src/main/scala/scalaz/syntax/std/OptionOps.scala"><code>OptionOps</code></a> and the goodies it provides to work with <code>Option</code>s. We’ll jump straight into examples.  </p>
<h3 id="Creating-Options"><a href="#Creating-Options" class="headerlink" title="Creating Options"></a>Creating Options</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="comment">// Some</span></span><br><span class="line">@ some(<span class="number">13</span>)</span><br><span class="line">res2: <span class="type">Option</span>[<span class="type">Int</span>] = <span class="type">Some</span>(<span class="number">13</span>)</span><br><span class="line"><span class="comment">// Calling some on a value</span></span><br><span class="line"><span class="comment">// Notice something about res variable? ;)</span></span><br><span class="line">@ <span class="number">13.</span>some</span><br><span class="line">res9: <span class="type">Option</span>[<span class="type">Int</span>] = <span class="type">Some</span>(<span class="number">13</span>)</span><br><span class="line"><span class="comment">// None</span></span><br><span class="line">@ none</span><br><span class="line">res3: <span class="type">Option</span>[<span class="type">Nothing</span>] = <span class="type">None</span></span><br><span class="line">@ none[<span class="type">Int</span>]</span><br><span class="line">res4: <span class="type">Option</span>[<span class="type">Int</span>] = <span class="type">None</span></span><br></pre></td></tr></table></figure>  
<h3 id="Extracting-Values"><a href="#Extracting-Values" class="headerlink" title="Extracting Values"></a>Extracting Values</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// using unary ~ operator</span></span><br><span class="line">@ ~ res2</span><br><span class="line">res5: <span class="type">Int</span> = <span class="number">13</span></span><br><span class="line"><span class="comment">// using some / none</span></span><br><span class="line">@ res2 some { _ * <span class="number">2</span> } none { <span class="number">0</span> }</span><br><span class="line">res6: <span class="type">Int</span> = <span class="number">26</span></span><br><span class="line"><span class="comment">// using | operator</span></span><br><span class="line">@ res2 | <span class="number">0</span></span><br><span class="line">res7: <span class="type">Int</span> = <span class="number">13</span></span><br><span class="line"><span class="comment">// extracting value from none</span></span><br><span class="line">@ ~ res4</span><br><span class="line">res8: <span class="type">Int</span> = <span class="number">0</span></span><br></pre></td></tr></table></figure>  
<p>The unary <code>~</code> extracts the value from the <code>Option</code> or returns the zero value for that type. For example, in case of <code>Int</code> it’ll return the value in the <code>Option</code> or return 0. The <code>some{ .. } none { .. }</code> construct lets you specify what value to return in case of <code>Some</code> and <code>None</code>. I am multiplying the value by 2 and thus returning 26. As you can see, Scalaz provides with more expressive and type-safe way to create and extract values from <code>Option</code>.   </p>
<p>Notice that the type of all the resulting variables is <code>Option</code> instead of <code>Some</code> or <code>None</code>. This is more type-safe than using <code>None</code> because you’d get <code>None.type</code>, and the type inferencer would allow the type to be <code>Option[Int]</code> or <code>Option[String]</code> whereas <code>none[Int]</code> is guaranteed to be an <code>Option[Int]</code>. The type inferencer will enforce this. </p>
<h3 id="Miscellaneous"><a href="#Miscellaneous" class="headerlink" title="Miscellaneous"></a>Miscellaneous</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// we'll have fun with these values</span></span><br><span class="line">@ <span class="keyword">val</span> o = some(<span class="string">"option"</span>)</span><br><span class="line">o: <span class="type">Option</span>[<span class="type">String</span>] = <span class="type">Some</span>(<span class="string">"option"</span>)</span><br><span class="line">@ <span class="keyword">val</span> n = none[<span class="type">String</span>]</span><br><span class="line">n: <span class="type">Option</span>[<span class="type">String</span>] = <span class="type">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// None to right disjunction</span></span><br><span class="line">@ n toRightDisjunction <span class="string">"onTheLeft"</span></span><br><span class="line">res10: <span class="type">String</span> \/ <span class="type">String</span> = -\/(<span class="string">"onTheLeft"</span>)</span><br><span class="line"><span class="comment">// Folding the disjunction prints the value on the left</span></span><br><span class="line">@ res10 fold(l =&gt; <span class="string">s"Left: <span class="subst">$l</span>"</span>.println, r =&gt; <span class="string">s"Right: <span class="subst">$r</span>"</span>.println)</span><br><span class="line"><span class="string">"Left: onTheLeft"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Some to right disjunction</span></span><br><span class="line">@ o toRightDisjunction <span class="string">"onTheLeft"</span></span><br><span class="line">res11: <span class="type">String</span> \/ <span class="type">String</span> = \/-(<span class="string">"option"</span>)</span><br><span class="line"><span class="comment">// Folding the disjunction prints the value on the right</span></span><br><span class="line">@ res11 fold(l =&gt; <span class="string">s"Left: <span class="subst">$l</span>"</span>.println, r =&gt; <span class="string">s"Right: <span class="subst">$r</span>"</span>.println)</span><br><span class="line"><span class="string">"Right: option"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// default values, similar to unary ~</span></span><br><span class="line">@ n.orZero</span><br><span class="line">res12: <span class="type">String</span> = <span class="string">""</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ternary operator</span></span><br><span class="line">@ o ? <span class="string">"some"</span> | <span class="string">"none"</span></span><br><span class="line">res13: <span class="type">String</span> = <span class="string">"some"</span></span><br></pre></td></tr></table></figure>  
<p>Scalaz provides us with a disjunction which is a replacement for Scala <code>Either</code>. I’ve only introduced disjunction here and will cover it later in a post of its own. Trying to convert a <code>None</code> to a right disjunction doesn’t work. We get back a left disjunction as indicated by <code>-\/</code>. Similarly, converting a <code>Some</code> to right disjunction works, as indicated by <code>\/-</code>. Scalaz also provides a ternary operator to work with <code>Option</code>s. </p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>This sums up, non-exhaustively, how we can use the convenience methods that Scalaz provides on top of <code>Option</code>s that lets us code in more expressive and type-safe way. </p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/07/04/scalaz-optionops/" data-id="cm5ezcg2y004ha4ru8u7d0zxl" data-title="Scalaz OptionOps" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/07/04/scalaz-optionops/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-enum" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/03/scalaz-enum/" class="article-date">
  <time datetime="2017-07-03T14:20:05.000Z" itemprop="datePublished">2017-07-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/03/scalaz-enum/">Scalaz Enum</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll look at how to create enum using Scalaz. However, we’ll first look at how to create enum using standard Scala library.  </p>
<h2 id="Enum-Scala-Way"><a href="#Enum-Scala-Way" class="headerlink" title="Enum - Scala Way"></a>Enum - Scala Way</h2><p><em>An enum type is a special data type that enables for a variable to be a set of predefined constants. The variable must be equal to one of the values that have been predefined for it. Common examples include compass directions (values of NORTH, SOUTH, EAST, and WEST) and the days of the week.</em><sup><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html">[1]</a></sup>   </p>
<p>There are a couple of ways in which you can create enum in Scala.  </p>
<h3 id="Using-scala-Enumeration"><a href="#Using-scala-Enumeration" class="headerlink" title="Using scala.Enumeration"></a>Using <a target="_blank" rel="noopener" href="http://www.scala-lang.org/api/current/scala/Enumeration.html"><code>scala.Enumeration</code></a></h3><p><em>Defines a finite set of values specific to the enumeration. Typically these values enumerate all possible forms something can take and provide a lightweight alternative to case classes.</em>  </p>
<p>Let’s see an example:  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="class"><span class="keyword">object</span> <span class="title">Direction</span> <span class="keyword">extends</span> <span class="title">Enumeration</span> </span>{</span><br><span class="line">    <span class="class"><span class="keyword">type</span> <span class="title">Direction</span> </span>= <span class="type">Value</span></span><br><span class="line">    <span class="keyword">val</span> <span class="type">NORTH</span>, <span class="type">EAST</span>, <span class="type">WEST</span>, <span class="type">SOUTH</span> = <span class="type">Value</span></span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">Direction</span></span></span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Direction</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Direction</span>._</span><br><span class="line">@ <span class="type">Direction</span> withName <span class="string">"NORTH"</span></span><br><span class="line">res2: <span class="type">Value</span> = <span class="type">NORTH</span></span><br><span class="line">@ <span class="type">Direction</span>.values foreach println</span><br><span class="line"><span class="type">NORTH</span></span><br><span class="line"><span class="type">EAST</span></span><br><span class="line"><span class="type">WEST</span></span><br><span class="line"><span class="type">SOUTH</span></span><br></pre></td></tr></table></figure>    
<p>Advantages:  </p>
<li> Lightweight. </li>
<li> Easy to use. </li>
<li> Iterable. </li>  


<p>Disadvantages:</p>
<li> They only exist as unique values. You cannot add behavior to them. </li>

<h3 id="Using-Case-Objects"><a href="#Using-Case-Objects" class="headerlink" title="Using Case Objects"></a>Using Case Objects</h3><p>Enum can also be created using <code>sealed trait</code>. A sealed trait requires all the classes or traits extending it be in the same file in which it is defined.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="class"><span class="keyword">object</span> <span class="title">Direction</span> </span>{</span><br><span class="line">    <span class="keyword">sealed</span> <span class="class"><span class="keyword">trait</span> <span class="title">Direction</span></span></span><br><span class="line">    <span class="keyword">case</span> <span class="class"><span class="keyword">object</span> <span class="title">NORTH</span> <span class="keyword">extends</span> <span class="title">Direction</span></span></span><br><span class="line">    <span class="keyword">case</span> <span class="class"><span class="keyword">object</span> <span class="title">EAST</span> <span class="keyword">extends</span> <span class="title">Direction</span></span></span><br><span class="line">    <span class="keyword">case</span> <span class="class"><span class="keyword">object</span> <span class="title">WEST</span> <span class="keyword">extends</span> <span class="title">Direction</span></span></span><br><span class="line">    <span class="keyword">case</span> <span class="class"><span class="keyword">object</span> <span class="title">SOUTH</span> <span class="keyword">extends</span> <span class="title">Direction</span></span></span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">Direction</span></span></span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Direction</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Direction</span>._</span><br></pre></td></tr></table></figure>  
<p>Advantages:  </p>
<li> Each value is an instance of its own type and it's possible to add behavior to them. </li>  

<p>Disadvantages:  </p>
<li> A case object generates a lot more code than `Enumeration`. </li>  
<li> Not iterable. </li>  

<h2 id="Enum-Scalaz-Way"><a href="#Enum-Scalaz-Way" class="headerlink" title="Enum - Scalaz Way"></a>Enum - Scalaz Way</h2><p>Scalaz allows creating enum using <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/fabab8f699d56279d6f2cc28d02cc2b768e314d7/core/src/main/scala/scalaz/Enum.scala"><code>Enum</code></a> trait. Scalaz enums are more powerful than the standard Scala enums. Let’s see some examples of creating Scalaz enum<sup><a target="_blank" rel="noopener" href="http://eed3si9n.com/learning-scalaz/Enum.html">[2]</a></sup>:  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="comment">// as a List</span></span><br><span class="line">@ 'a' |-&gt; 'z'</span><br><span class="line">res3: <span class="type">List</span>[<span class="type">Char</span>] = <span class="type">List</span>(</span><br><span class="line">  'a',</span><br><span class="line">  'b',</span><br><span class="line">  'c',</span><br><span class="line">  'd',</span><br><span class="line">  'e',</span><br><span class="line">  'f',</span><br><span class="line">  ...</span><br><span class="line"><span class="comment">// as a Scalaz stream</span></span><br><span class="line">@ 'a' |=&gt; 'z'</span><br><span class="line">res4: <span class="type">EphemeralStream</span>[<span class="type">Char</span>] = scalaz.<span class="type">EphemeralStream</span>$$anon$<span class="number">5</span>@<span class="number">2</span>fb4925c</span><br></pre></td></tr></table></figure>
<p>Scalaz also provides us with <code>succ</code> and <code>pred</code> to get the successor and predecessor.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ '<span class="type">B</span>'.succ</span><br><span class="line">res6: <span class="type">Char</span> = '<span class="type">C</span>'</span><br><span class="line">@ '<span class="type">B</span>'.pred</span><br><span class="line">res7: <span class="type">Char</span> = '<span class="type">A</span>'</span><br></pre></td></tr></table></figure>  
<p>It’s also possible to easily step through the enumeration.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3 steps forwards</span></span><br><span class="line">@ '<span class="type">B</span>' -+- <span class="number">3</span></span><br><span class="line">res8: <span class="type">Char</span> = '<span class="type">E</span>'</span><br><span class="line"><span class="comment">// 3 steps backwards</span></span><br><span class="line">@ '<span class="type">B</span>' --- <span class="number">3</span></span><br><span class="line">res9: <span class="type">Char</span> = '?'</span><br></pre></td></tr></table></figure>  
<p>You can also get min and max values for an enumeration.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ implicitly[<span class="type">Enum</span>[<span class="type">Int</span>]].min</span><br><span class="line">res10: <span class="type">Option</span>[<span class="type">Int</span>] = <span class="type">Some</span>(<span class="number">-2147483648</span>)</span><br><span class="line">@ implicitly[<span class="type">Enum</span>[<span class="type">Int</span>]].max</span><br><span class="line">res11: <span class="type">Option</span>[<span class="type">Int</span>] = <span class="type">Some</span>(<span class="number">2147483647</span>)</span><br></pre></td></tr></table></figure>
<p>Let’s create our own enumeration using Scalaz <code>Enum</code>.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line">@ <span class="class"><span class="keyword">object</span> <span class="title">Size</span> </span>{</span><br><span class="line">    <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Size</span>(<span class="params">val size: <span class="type">Int</span>, val name: <span class="type">String</span></span>)</span></span><br><span class="line">    <span class="keyword">val</span> <span class="type">SMALL</span> = <span class="type">Size</span>(<span class="number">0</span>, <span class="string">"SMALL"</span>)</span><br><span class="line">    <span class="keyword">val</span> <span class="type">MEDIUM</span> = <span class="type">Size</span>(<span class="number">1</span>, <span class="string">"MEDIUM"</span>)</span><br><span class="line">    <span class="keyword">val</span> <span class="type">LARGE</span> = <span class="type">Size</span>(<span class="number">2</span>, <span class="string">"LARGE"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">SizeEnum</span> <span class="keyword">extends</span> <span class="title">Enum</span>[<span class="type">Size</span>] <span class="keyword">with</span> <span class="title">Show</span>[<span class="type">Size</span>] </span>{</span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">order</span></span>(s1: <span class="type">Size</span>, s2: <span class="type">Size</span>): <span class="type">Ordering</span> = (s1.size compare s2.size) <span class="keyword">match</span> {</span><br><span class="line">          <span class="keyword">case</span> <span class="number">-1</span> =&gt; <span class="type">Ordering</span>.<span class="type">LT</span></span><br><span class="line">          <span class="keyword">case</span> <span class="number">0</span> =&gt; <span class="type">Ordering</span>.<span class="type">EQ</span></span><br><span class="line">          <span class="keyword">case</span> <span class="number">1</span> =&gt; <span class="type">Ordering</span>.<span class="type">GT</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">succ</span></span>(s: <span class="type">Size</span>): <span class="type">Size</span> = s <span class="keyword">match</span> {</span><br><span class="line">          <span class="keyword">case</span> <span class="type">SMALL</span> =&gt; <span class="type">MEDIUM</span></span><br><span class="line">          <span class="keyword">case</span> <span class="type">MEDIUM</span> =&gt; <span class="type">LARGE</span></span><br><span class="line">          <span class="keyword">case</span> <span class="type">LARGE</span> =&gt; <span class="type">SMALL</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">pred</span></span>(s: <span class="type">Size</span>): <span class="type">Size</span> = s <span class="keyword">match</span> {</span><br><span class="line">          <span class="keyword">case</span> <span class="type">SMALL</span> =&gt; <span class="type">LARGE</span></span><br><span class="line">          <span class="keyword">case</span> <span class="type">MEDIUM</span> =&gt; <span class="type">SMALL</span></span><br><span class="line">          <span class="keyword">case</span> <span class="type">LARGE</span> =&gt; <span class="type">MEDIUM</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">zero</span></span>: <span class="type">Size</span> = <span class="type">SMALL</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">shows</span></span>(s: <span class="type">Size</span>) = s.name</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">max</span> </span>= <span class="type">Some</span>(<span class="type">LARGE</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">min</span> </span>= <span class="type">Some</span>(<span class="type">SMALL</span>)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">Size</span></span></span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Size</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Size</span>._</span><br><span class="line"><span class="comment">// step through</span></span><br><span class="line">@ <span class="type">SMALL</span> -+- <span class="number">1</span></span><br><span class="line">res4: <span class="type">Size</span> = <span class="type">Size</span>(<span class="number">1</span>, <span class="string">"MEDIUM"</span>)</span><br><span class="line"><span class="comment">// as a list</span></span><br><span class="line">@ <span class="type">SMALL</span> |-&gt; <span class="type">LARGE</span></span><br><span class="line">res5: <span class="type">List</span>[<span class="type">Size</span>] = <span class="type">List</span>(<span class="type">Size</span>(<span class="number">0</span>, <span class="string">"SMALL"</span>), <span class="type">Size</span>(<span class="number">1</span>, <span class="string">"MEDIUM"</span>), <span class="type">Size</span>(<span class="number">2</span>, <span class="string">"LARGE"</span>))</span><br><span class="line"><span class="comment">// show</span></span><br><span class="line">@ <span class="type">SMALL</span>.println</span><br><span class="line"><span class="type">SMALL</span></span><br><span class="line"><span class="comment">// max</span></span><br><span class="line">@ implicitly[<span class="type">Enum</span>[<span class="type">Size</span>]].max</span><br><span class="line">res6: <span class="type">Option</span>[<span class="type">Size</span>] = <span class="type">Some</span>(<span class="type">Size</span>(<span class="number">2</span>, <span class="string">"LARGE"</span>))</span><br><span class="line"><span class="comment">// min</span></span><br><span class="line">@ implicitly[<span class="type">Enum</span>[<span class="type">Size</span>]].min</span><br><span class="line">res7: <span class="type">Option</span>[<span class="type">Size</span>] = <span class="type">Some</span>(<span class="type">Size</span>(<span class="number">0</span>, <span class="string">"SMALL"</span>))</span><br></pre></td></tr></table></figure>  
<p>Notice that since we’re using <code>implicitly[]</code>, we don’t have to provide the exact name of the typeclass extending <code>Enum[Size]</code>, the compiler will figure it out from the implicits within scope.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Although Scalaz <code>Enum</code> may seem like a long-winded way to do something trivial, they offer you a lot more flexibility and brevity over vanilla Scala enum. However, I believe that the full force of Scalaz <code>Enum</code> is needed only when you have ordered elements like size. For cases like compass directions, Scala enum are better-suited.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/07/03/scalaz-enum/" data-id="cm5ezcg2w0041a4ru7txnftsc" data-title="Scalaz Enum" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/07/03/scalaz-enum/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-show" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/01/scalaz-show/" class="article-date">
  <time datetime="2017-07-01T05:31:40.000Z" itemprop="datePublished">2017-07-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/01/scalaz-show/">Scalaz Show</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll look at Scalaz <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/fabab8f699d56279d6f2cc28d02cc2b768e314d7/core/src/main/scala/scalaz/Show.scala"><code>Show</code></a>. The only purpose of this trait is to provide a <code>String</code> representation for its subtypes.  </p>
<h2 id="A-Simple-Example"><a href="#A-Simple-Example" class="headerlink" title="A Simple Example"></a>A Simple Example</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line">@ <span class="number">3.</span>show</span><br><span class="line">res2: <span class="type">Cord</span> = <span class="type">Cord</span>(<span class="number">1</span> [<span class="number">3</span>])</span><br><span class="line">@ <span class="number">3.</span>println</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>  
<p>As always, there are implicits defined for <code>Int</code>, <code>Float</code>, etc. Calling <code>println</code> returns a <code>String</code> whereas calling <code>show</code> returns a <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/fabab8f699d56279d6f2cc28d02cc2b768e314d7/core/src/main/scala/scalaz/Cord.scala"><code>Cord</code></a>. Going over the source code for <code>Cord</code>: </p>
<p><em>A Cord is a purely functional data structure for efficiently storing and manipulating Strings that are potentially very long.</em>  </p>
<h2 id="Why-Use-Show"><a href="#Why-Use-Show" class="headerlink" title="Why Use Show?"></a>Why Use Show?</h2><p>A reasonable question to ask is why use <code>Show</code> when we have a <code>toString</code> which produces a <code>String</code> representation of objects. The answer is that <code>toSring</code> doesn’t always produce a useful representation.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ println(<span class="keyword">new</span> <span class="type">Thread</span>())</span><br><span class="line"><span class="type">Thread</span>[<span class="type">Thread</span><span class="number">-185</span>,<span class="number">5</span>,main]</span><br></pre></td></tr></table></figure>  
<h2 id="Showing-a-Thread"><a href="#Showing-a-Thread" class="headerlink" title="Showing a Thread"></a>Showing a Thread</h2><p>So, let’s create a <code>Show</code> for <code>Thread</code>.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">ThreadShowable</span> <span class="keyword">extends</span> <span class="title">Show</span>[<span class="type">Thread</span>] </span>{</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">shows</span></span>(t: <span class="type">Thread</span>): <span class="type">String</span> = <span class="string">s"Thread Id=<span class="subst">${t.getId}</span> name=<span class="subst">${t.getName}</span>"</span></span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">ThreadShowable</span></span></span><br><span class="line">@ <span class="keyword">val</span> t = <span class="keyword">new</span> <span class="type">Thread</span>()</span><br><span class="line">t: <span class="type">Thread</span> = <span class="type">Thread</span>[<span class="type">Thread</span><span class="number">-322</span>,<span class="number">5</span>,main]</span><br><span class="line"><span class="comment">// Scala way</span></span><br><span class="line">@ println(t)</span><br><span class="line"><span class="type">Thread</span>[<span class="type">Thread</span><span class="number">-322</span>,<span class="number">5</span>,main]</span><br><span class="line"><span class="comment">// Scalaz way</span></span><br><span class="line">@ t.println</span><br><span class="line"><span class="type">Thread</span> <span class="type">Id</span>=<span class="number">352</span> name=<span class="type">Thread</span><span class="number">-322</span></span><br></pre></td></tr></table></figure>  
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p><code>Show</code> is probably not that interesting and probably exists because there is <code>Show</code> class in Haskell<sup><a target="_blank" rel="noopener" href="https://www.haskell.org/tutorial/stdclasses.html">[1]</a></sup>:  </p>
<p><em>The instances of class Show are those types that can be converted to character strings (typically for I/O)</em></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/07/01/scalaz-show/" data-id="cm5ezcg2y004oa4ru1uvy3f38" data-title="Scalaz Show" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/07/01/scalaz-show/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-order" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/29/scalaz-order/" class="article-date">
  <time datetime="2017-06-29T09:00:08.000Z" itemprop="datePublished">2017-06-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/29/scalaz-order/">Scalaz Order</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll look at how to implement ordering using Scalaz <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/fabab8f699d56279d6f2cc28d02cc2b768e314d7/core/src/main/scala/scalaz/Order.scala"><code>Order</code></a> trait. However, before we do that, let’s step back a little and look at how we implement ordering using <a target="_blank" rel="noopener" href="http://www.scala-lang.org/api/current/scala/math/Ordering.html"><code>scala.math.Ordering</code></a>  </p>
<h2 id="Sorting-a-Collection-Scala-Way"><a href="#Sorting-a-Collection-Scala-Way" class="headerlink" title="Sorting a Collection - Scala Way"></a>Sorting a Collection - Scala Way</h2><p>Say we have a <code>List</code> and we’d like to sort it.<sup><a target="_blank" rel="noopener" href="http://alvinalexander.com/scala/how-to-sort-scala-collections-sortwith-sorted-ordered-ordering">[1]</a></sup> We can do so by calling the <code>sorted</code> method on it and it’ll work out-of-the-box for lists of <code>Int</code>, <code>Float</code>, etc. because there is an implicit in <code>scala.math.Ordering</code>.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">-1</span>, <span class="number">0</span>).sorted</span><br><span class="line">res0: <span class="type">List</span>[<span class="type">Int</span>] = <span class="type">List</span>(<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>  
<p>Going over the documentation for <code>scala.math.Ordering</code><sup><a target="_blank" rel="noopener" href="http://www.scala-lang.org/api/current/scala/math/Ordering.html">[2]</a></sup>:  </p>
<p><em>Ordering is a trait whose instances each represent a strategy for sorting instances of a type.<br>Ordering’s companion object defines many implicit objects to deal with subtypes of AnyVal (e.g. Int, Double), String, and others.</em>  </p>
<p>All the implicit objects in the companion object implement the <code>scala.math.Ordering</code> trait which extends the <code>java.util.Comparator</code> interface. Thus, they all have a <code>compare</code> method. What if we have types for which there is no sorting strategy in the companion object of <code>scala.math.Ordering</code>? We define our own like so:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Salary</span>(<span class="params">amt: <span class="type">Float</span></span>)</span></span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">Salary</span></span></span><br><span class="line">@ <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">SalaryOrdered</span> <span class="keyword">extends</span> <span class="title">Ordering</span>[<span class="type">Salary</span>] </span>{</span><br><span class="line">    <span class="comment">// we are using compare on type Float</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">compare</span></span>(a: <span class="type">Salary</span>, b: <span class="type">Salary</span>): <span class="type">Int</span> = a.amt compare b.amt</span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">SalaryOrdered</span></span></span><br><span class="line">@ <span class="type">List</span>(<span class="type">Salary</span>(<span class="number">999.0</span>f), <span class="type">Salary</span>(<span class="number">555.0</span>f)).sorted</span><br><span class="line">res4: <span class="type">List</span>[<span class="type">Salary</span>] = <span class="type">List</span>(<span class="type">Salary</span>(<span class="number">555.0</span>F), <span class="type">Salary</span>(<span class="number">999.0</span>F))</span><br></pre></td></tr></table></figure>  
<p>But we still don’t have operators like <code>&lt;</code>, <code>&lt;=</code>, etc. on type <code>Salary</code>.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="type">Salary</span>(<span class="number">999.0</span>f) &gt; <span class="type">Salary</span>(<span class="number">555.0</span>f)</span><br><span class="line">cmd3.sc:<span class="number">1</span>: value &gt; is not a member of ammonite.$sess.cmd0.<span class="type">Salary</span></span><br><span class="line"><span class="keyword">val</span> res3 = <span class="type">Salary</span>(<span class="number">999.0</span>f) &gt; <span class="type">Salary</span>(<span class="number">555.0</span>f)</span><br><span class="line">                          ^</span><br><span class="line"><span class="type">Compilation</span> <span class="type">Failed</span></span><br></pre></td></tr></table></figure>  
<p>To do that, the trait <code>scala.math.Ordered</code> would have to be mixed in.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Salary</span>(<span class="params">amt: <span class="type">Float</span></span>) <span class="keyword">extends</span> <span class="title">Ordered</span>[<span class="type">Salary</span>] </span>{</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">compare</span></span>(that: <span class="type">Salary</span>): <span class="type">Int</span> = <span class="keyword">this</span>.amt compare that.amt</span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">Salary</span></span></span><br><span class="line">@ <span class="type">Salary</span>(<span class="number">1.0</span>f) &lt; <span class="type">Salary</span>(<span class="number">2.0</span>f)</span><br><span class="line">res1: <span class="type">Boolean</span> = <span class="literal">true</span></span><br><span class="line">@ <span class="type">List</span>(<span class="type">Salary</span>(<span class="number">2.0</span>f), <span class="type">Salary</span>(<span class="number">2.0</span>f), <span class="type">Salary</span>(<span class="number">1.0</span>f)).sorted</span><br><span class="line">res2: <span class="type">List</span>[<span class="type">Salary</span>] = <span class="type">List</span>(<span class="type">Salary</span>(<span class="number">1.0</span>F), <span class="type">Salary</span>(<span class="number">2.0</span>F), <span class="type">Salary</span>(<span class="number">2.0</span>F))</span><br></pre></td></tr></table></figure>  
<p>And we know that if we’re working with a library, we do not have the liberty to mix a trait for our convenience. Also, Scala’s comparison operators are not type safe.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1</span> &gt; <span class="number">2.0</span></span><br><span class="line">res4: <span class="type">Boolean</span> = <span class="literal">false</span></span><br></pre></td></tr></table></figure>  
<h2 id="Sorting-a-Collection-Scalaz-Way"><a href="#Sorting-a-Collection-Scalaz-Way" class="headerlink" title="Sorting a Collection - Scalaz Way"></a>Sorting a Collection - Scalaz Way</h2><p>As stated before, Scalaz provides <code>Order</code> trait. Staying with our <code>Salary</code> example, let’s put Scalaz <code>Order</code> to use.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line">@ <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Salary</span>(<span class="params">amt: <span class="type">Float</span></span>)</span></span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">Salary</span></span></span><br><span class="line">@ <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">SalaryOrder</span> <span class="keyword">extends</span> <span class="title">Order</span>[<span class="type">Salary</span>] </span>{</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">order</span></span>(a: <span class="type">Salary</span>, b: <span class="type">Salary</span>): <span class="type">Ordering</span> = {</span><br><span class="line">      a.amt compare b.amt <span class="keyword">match</span> {</span><br><span class="line">        <span class="keyword">case</span> <span class="number">-1</span> =&gt; <span class="type">Ordering</span>.<span class="type">LT</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span> =&gt; <span class="type">Ordering</span>.<span class="type">EQ</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span> =&gt; <span class="type">Ordering</span>.<span class="type">GT</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">SalaryOrder</span></span></span><br></pre></td></tr></table></figure>
<p>We’ve defined a way to order <code>Salary</code> objects using Scalaz <code>Order</code> trait via a typeclass. The implicit object needs to provide an implementation for <code>order</code> method which returns an <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/fabab8f699d56279d6f2cc28d02cc2b768e314d7/core/src/main/scala/scalaz/Ordering.scala"><code>Ordering</code></a> value. Going over the code for Scalaz <code>Ordering</code>: </p>
<p><em>This Ordering is analogous to the Ints returned by scala.math.Ordering.</em>  </p>
<p>Now, we have comparison operators at our disposal. Here’s how we can compare <code>Salary</code> objects using the <code>?|?</code> operator:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="type">Salary</span>(<span class="number">1.0</span>f) ?|? <span class="type">Salary</span>(<span class="number">2.0</span>f)</span><br><span class="line">res4: <span class="type">Ordering</span> = <span class="type">LT</span></span><br></pre></td></tr></table></figure>  
<p><code>?|?</code> can also be used with <code>Int</code>, <code>Float</code>, etc. and is type-safe.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1.0</span> ?|? <span class="number">2.0</span></span><br><span class="line">res5: <span class="type">Ordering</span> = <span class="type">LT</span></span><br><span class="line">@ <span class="number">1.0</span> ?!? <span class="number">2</span></span><br><span class="line">cmd6.sc:<span class="number">1</span>: value ?!? is not a member of <span class="type">Double</span></span><br><span class="line"><span class="keyword">val</span> res6 = <span class="number">1.0</span> ?!? <span class="number">2</span></span><br><span class="line">               ^</span><br><span class="line"><span class="type">Compilation</span> <span class="type">Failed</span></span><br></pre></td></tr></table></figure>  
<p>Also, analogous to <code>&lt;</code>, <code>&lt;=</code>, we now have type-safe <code>lt</code>, <code>lte</code>, etc.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1.0</span> gte <span class="number">2.0</span></span><br><span class="line">res6: <span class="type">Boolean</span> = <span class="literal">false</span></span><br><span class="line">@ <span class="number">1</span> gt <span class="number">2.0</span></span><br><span class="line">cmd8.sc:<span class="number">1</span>: <span class="class"><span class="keyword">type</span> <span class="title">mismatch</span></span>;</span><br><span class="line"> found   : <span class="type">Double</span>(<span class="number">2.0</span>)</span><br><span class="line"> required: <span class="type">Int</span></span><br><span class="line"><span class="keyword">val</span> res8 = <span class="number">1</span> gt <span class="number">2.0</span></span><br><span class="line">                ^</span><br><span class="line"><span class="type">Compilation</span> <span class="type">Failed</span></span><br></pre></td></tr></table></figure>
<p>That’s not where the power ends. You can also compare <code>Option</code>s seamlessly. Do note that it is <code>some</code> with a lowercase “s”.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ some(<span class="type">Salary</span>(<span class="number">1.0</span>f)) ?|? some(<span class="type">Salary</span>(<span class="number">2.0</span>f))</span><br><span class="line">res8: <span class="type">Ordering</span> = <span class="type">LT</span></span><br></pre></td></tr></table></figure>  
<p>You can now also use <code>sorted</code> on a collection equally easily. Using <code>Order[A].toScalaOrdering</code> we can get back an object of type <code>scala.math.Ordering</code> which we can use to sort collections. </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">implicit</span> <span class="keyword">val</span> salaryOrdering = <span class="type">Order</span>[<span class="type">Salary</span>].toScalaOrdering</span><br><span class="line">salaryOrdering: math.<span class="type">Ordering</span>[<span class="type">Salary</span>] = scalaz.<span class="type">Order</span>$$anon$<span class="number">1</span>@<span class="number">5</span>b8a5d7c</span><br><span class="line">@ <span class="type">List</span>(<span class="type">Salary</span>(<span class="number">2.0</span>f), <span class="type">Salary</span>(<span class="number">1.0</span>f), <span class="type">Salary</span>(<span class="number">0.0</span>f)).sorted</span><br><span class="line">res10: <span class="type">List</span>[<span class="type">Salary</span>] = <span class="type">List</span>(<span class="type">Salary</span>(<span class="number">0.0</span>F), <span class="type">Salary</span>(<span class="number">1.0</span>F), <span class="type">Salary</span>(<span class="number">2.0</span>F))</span><br></pre></td></tr></table></figure>  
<p>Also, since <code>Order</code> trait extends the <code>Equal</code> trait, you get the <code>===</code> operator, too.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="type">Salary</span>(<span class="number">0.0</span>F) === <span class="type">Salary</span>(<span class="number">1.0</span>F)</span><br><span class="line">res11: <span class="type">Boolean</span> = <span class="literal">false</span></span><br></pre></td></tr></table></figure>  
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>By using Scalaz <code>Order</code> trait, we can implement comparison between values in a type-safe and extensible way. There’s seamless transformation from Scalaz <code>Order</code> to <code>scala.math.Ordering</code> which lets us use the <code>sorted</code> method on collections.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/06/29/scalaz-order/" data-id="cm5ezcg2y004ma4rufvm6c1wd" data-title="Scalaz Order" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/06/29/scalaz-order/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-equals" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/28/scalaz-equals/" class="article-date">
  <time datetime="2017-06-28T15:03:52.000Z" itemprop="datePublished">2017-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/28/scalaz-equals/">Scalaz Equal</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll finally start using Scalaz. We’ll look at how to get Scalaz using <code>sbt</code> and look at how it provides us with type-safe equality checking.  </p>
<h2 id="Getting-Scalaz"><a href="#Getting-Scalaz" class="headerlink" title="Getting Scalaz"></a>Getting Scalaz</h2><p>Add the following line to your <code>build.sbt</code> file:  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libraryDependencies += <span class="string">"org.scalaz"</span> %% <span class="string">"scalaz-core"</span> % <span class="string">"7.2.14"</span></span><br></pre></td></tr></table></figure>  
<p><hr> </p>
<h5 id="NOTE"><a href="#NOTE" class="headerlink" title="NOTE:"></a>NOTE:</h5><p>I highly recommend <a target="_blank" rel="noopener" href="http://ammonite.io/">Ammonite Scala REPL</a>. It provides a lot of improvements over the standard REPL like being able to import library dependencies straight from the console. I’ll be using Ammonite REPL henceforth because it’ll help me keep the examples in the REPL. However, there isn’t any difference beyond how to get the dependencies.</p>
<hr>  

<h2 id="Fire-Up-the-REPL"><a href="#Fire-Up-the-REPL" class="headerlink" title="Fire Up the REPL"></a>Fire Up the REPL</h2><p>No matter what your preferred REPL is, let’s get started.  </p>
<h3 id="Standard-REPL"><a href="#Standard-REPL" class="headerlink" title="Standard REPL"></a>Standard REPL</h3><p>Start the REPL by executing <code>sbt console</code>. Then, execute the following:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br></pre></td></tr></table></figure>  
<h3 id="Ammonite"><a href="#Ammonite" class="headerlink" title="Ammonite"></a>Ammonite</h3><p>Start the REPL by executing the <code>amm</code> command. Then, execute the following:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> $ivy.`org.scalaz::scalaz-core:<span class="number">7.2</span><span class="number">.14</span>`</span><br><span class="line"><span class="keyword">import</span> $ivy.$</span><br><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br></pre></td></tr></table></figure>
<h2 id="Equality-Checking"><a href="#Equality-Checking" class="headerlink" title="Equality Checking"></a>Equality Checking</h2><p>We can compare two values in Scala using <code>==</code> (double equals). The issue, however, is that it will let us compare unrelated types like a string with an integer and such a comparison would always yield false.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1</span> == <span class="string">"1"</span></span><br><span class="line">res3: <span class="type">Boolean</span> = <span class="literal">false</span></span><br></pre></td></tr></table></figure>  
<p>The <code>==</code> operator that Scala provides is a null-safe comparison operator and not type-safe. What if we want type-safety, too? This is where Scalaz’s <code>===</code> (triple equals) comes in. It’ll complain when you try to compare unrelated types.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1</span> === <span class="string">"1"</span></span><br><span class="line">cmd4.sc:<span class="number">1</span>: <span class="class"><span class="keyword">type</span> <span class="title">mismatch</span></span>;</span><br><span class="line"> found   : <span class="type">String</span>(<span class="string">"1"</span>)</span><br><span class="line"> required: <span class="type">Int</span></span><br><span class="line"><span class="keyword">val</span> res4 = <span class="number">1</span> === <span class="string">"1"</span></span><br><span class="line">                 ^</span><br><span class="line"><span class="type">Compilation</span> <span class="type">Failed</span></span><br></pre></td></tr></table></figure>  
<p>Similarly, we can check for inequalities. The Scala operator <code>!=</code> is null-safe but not type-safe.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1</span> != <span class="string">"1"</span></span><br><span class="line">res4: <span class="type">Boolean</span> = <span class="literal">true</span></span><br></pre></td></tr></table></figure>  
<p>Here’s the Scalaz way to check for inequality using <code>=/=</code> operator which is both type-safe and null-safe:  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1</span> =/= <span class="string">"1"</span></span><br><span class="line">cmd5.sc:<span class="number">1</span>: <span class="class"><span class="keyword">type</span> <span class="title">mismatch</span></span>;</span><br><span class="line"> found   : <span class="type">String</span>(<span class="string">"1"</span>)</span><br><span class="line"> required: <span class="type">Int</span></span><br><span class="line"><span class="keyword">val</span> res5 = <span class="number">1</span> =/= <span class="string">"1"</span></span><br><span class="line">                 ^</span><br><span class="line"><span class="type">Compilation</span> <span class="type">Failed</span></span><br></pre></td></tr></table></figure>  
<h2 id="Under-the-Hoods"><a href="#Under-the-Hoods" class="headerlink" title="Under the Hoods"></a>Under the Hoods</h2><p>As always, there are type classes at play here. There is an <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/fabab8f699d56279d6f2cc28d02cc2b768e314d7/core/src/main/scala/scalaz/Equal.scala"><code>Equal</code></a> trait which provides an <code>equal</code> to check if the two values are equal and of the same type.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">equal</span></span>(a1: <span class="type">F</span>, a2: <span class="type">F</span>): <span class="type">Boolean</span></span><br></pre></td></tr></table></figure>  
<p>Since all this magic is done using type classes, how about we put it to use and write code to compare two <code>Person</code> objects?  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">id: <span class="type">Int</span>, name: <span class="type">String</span></span>)</span></span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></span><br><span class="line">@ <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">PersonEquals</span> <span class="keyword">extends</span> <span class="title">Equal</span>[<span class="type">Person</span>] </span>{</span><br><span class="line">    <span class="comment">// we are using Scalaz === internally</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">equal</span></span>(a1: <span class="type">Person</span>, a2: <span class="type">Person</span>): <span class="type">Boolean</span> = a1.id === a2.id &amp;&amp; a1.name === a2.name </span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">PersonEquals</span></span></span><br><span class="line">@ <span class="type">Person</span>(<span class="number">1</span>, <span class="string">"John"</span>) === <span class="type">Person</span>(<span class="number">2</span>, <span class="string">"Jane"</span>)</span><br><span class="line">res7: <span class="type">Boolean</span> = <span class="literal">false</span></span><br><span class="line">@ <span class="type">Person</span>(<span class="number">1</span>, <span class="string">"John"</span>) =/= <span class="type">Person</span>(<span class="number">2</span>, <span class="string">"Jane"</span>)</span><br><span class="line">res8: <span class="type">Boolean</span> = <span class="literal">true</span></span><br></pre></td></tr></table></figure>  
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Scalaz <code>===</code> lets you check for equality in a type-safe way. More often than not, this is what you need. Trying to compare values of dissimilar types is usually not needed. Using <code>===</code> ensures that such comparisons lead to errors at compile-time instead of waiting for them to surface at run-time. This makes debugging much more efficient.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/06/28/scalaz-equals/" data-id="cm5ezcg2w0044a4ruddj1dgyq" data-title="Scalaz Equal" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/06/28/scalaz-equals/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-types-of-polymorphism" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/27/scalaz-types-of-polymorphism/" class="article-date">
  <time datetime="2017-06-27T07:24:44.000Z" itemprop="datePublished">2017-06-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/27/scalaz-types-of-polymorphism/">Scalaz Types of Polymorphism</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Polymorphism is a programming language feature that allows one interface to be used for a general class of actions.<sup><a target="_blank" rel="noopener" href="http://scala.org.ua/presentations/scala-polymorphism/#/1">[1]</a></sup> Scalaz makes extensive use of ad-hoc polymorphism to provide its set of goodies. In this post I’ll cover ad-hoc polymorphism in detail and show you how you can implement ad-hoc polymorphism in Scala. I’ll also talk about parametric, and subtype polymorphism.  </p>
<h2 id="Parametric-Polymorphism"><a href="#Parametric-Polymorphism" class="headerlink" title="Parametric Polymorphism"></a>Parametric Polymorphism</h2><p>In parametric polymorphism, the behavior of the function does not depend upon the type of the arguments passed to it. More formally<sup><a target="_blank" rel="noopener" href="https://wiki.haskell.org/Polymorphism#Parametric_polymorphism">[2]</a></sup>,  </p>
<p><em>Parametric polymorphism refers to when the type of a value contains one or more (unconstrained) type variables, so that the value may adopt any type that results from substituting those variables with concrete types.</em> </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="function"><span class="keyword">def</span> <span class="title">head</span></span>[<span class="type">A</span>](xs: <span class="type">List</span>[<span class="type">A</span>]) = xs(<span class="number">0</span>)</span><br><span class="line">head: [<span class="type">A</span>](xs: <span class="type">List</span>[<span class="type">A</span>])<span class="type">A</span></span><br><span class="line"></span><br><span class="line">scala&gt; head(<span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line">res0: <span class="type">Int</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">scala&gt; head(<span class="type">List</span>(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>))</span><br><span class="line">res1: <span class="type">String</span> = a</span><br></pre></td></tr></table></figure>  
<p>Here, the argument <code>xs</code> has an unconstrained type <code>A</code> which can be anything and yet <code>head</code> would work. Then we call <code>head</code> with lists of concrete type <code>Int</code>, and <code>String</code> resulting in <code>xs</code> being of type <code>List[Int]</code> and <code>List[String]</code>.  </p>
<h2 id="Subtype-Polymorphism"><a href="#Subtype-Polymorphism" class="headerlink" title="Subtype Polymorphism"></a>Subtype Polymorphism</h2><p>Subtype polymorphism involves inheritance. More formally<sup><a target="_blank" rel="noopener" href="http://scala.org.ua/presentations/scala-polymorphism/#/10">[3]</a></sup>, </p>
<p><em>Subtype polymorphism is a form of type polymorphism in which a subtype is a data-type that is related to another data-type (the super-type) by some notion of substitutability.</em> </p>
<p>As an example<sup><a target="_blank" rel="noopener" href="http://eed3si9n.com/learning-scalaz/polymorphism.html#Subtype+polymorphism">[4]</a></sup>, consider a trait <code>Plus</code> which lets its subtype add itself with another of the same type.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="class"><span class="keyword">trait</span> <span class="title">Plus</span>[<span class="type">A</span>] </span>{</span><br><span class="line">     |   <span class="function"><span class="keyword">def</span> <span class="title">plus</span></span>(a2: <span class="type">A</span>): <span class="type">A</span></span><br><span class="line">     | }</span><br><span class="line">defined <span class="class"><span class="keyword">trait</span> <span class="title">Plus</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="function"><span class="keyword">def</span> <span class="title">plus</span></span>[<span class="type">A</span> &lt;: <span class="type">Plus</span>[<span class="type">A</span>]](a1: <span class="type">A</span>, a2: <span class="type">A</span>): <span class="type">A</span> = a1.plus(a2)</span><br><span class="line">plus: [<span class="type">A</span> &lt;: <span class="type">Plus</span>[<span class="type">A</span>]](a1: <span class="type">A</span>, a2: <span class="type">A</span>)<span class="type">A</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Currency</span>(<span class="params">amount: <span class="type">Float</span>, code: <span class="type">String</span></span>) <span class="keyword">extends</span> <span class="title">Plus</span>[<span class="type">Currency</span>] </span>{</span><br><span class="line">     |   <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">plus</span></span>(other: <span class="type">Currency</span>) = <span class="type">Currency</span>(<span class="keyword">this</span>.amount + other.amount, <span class="keyword">this</span>.code)</span><br><span class="line">     | }</span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">Currency</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Kilogram</span>(<span class="params">amount: <span class="type">Float</span></span>) <span class="keyword">extends</span> <span class="title">Plus</span>[<span class="type">Kilogram</span>] </span>{</span><br><span class="line">     |   <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">plus</span></span>(other: <span class="type">Kilogram</span>) = <span class="type">Kilogram</span>(<span class="keyword">this</span>.amount + other.amount)</span><br><span class="line">     | }</span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">Kilogram</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; plus(<span class="type">Currency</span>(<span class="number">1</span>, <span class="string">"USD"</span>), <span class="type">Currency</span>(<span class="number">1</span>, <span class="string">"USD"</span>))</span><br><span class="line">res4: <span class="type">Currency</span> = <span class="type">Currency</span>(<span class="number">2.0</span>,<span class="type">USD</span>)</span><br><span class="line"></span><br><span class="line">scala&gt; plus(<span class="type">Kilogram</span>(<span class="number">1</span>), <span class="type">Kilogram</span>(<span class="number">1</span>))</span><br><span class="line">res5: <span class="type">Kilogram</span> = <span class="type">Kilogram</span>(<span class="number">2.0</span>)</span><br></pre></td></tr></table></figure>  
<p>The function <code>plus[A &lt;: Plus[A]]</code> will work only with those arguments that are subtype of <code>Plus</code>. This is restrictive because for this to work, the trait needs to be mixed in at the time of defining whatever concrete type <code>A</code> represents.  </p>
<h2 id="Ad-hoc-Polymorphism"><a href="#Ad-hoc-Polymorphism" class="headerlink" title="Ad-hoc Polymorphism"></a>Ad-hoc Polymorphism</h2><p>In ad-hoc polymorphism the behavior of the function depends on what the type of the argument is. More formally<sup><a target="_blank" rel="noopener" href="https://wiki.haskell.org/Polymorphism#Ad-hoc_polymorphism">[5]</a></sup>, </p>
<p><em>Ad-hoc polymorphism refers to when a value is able to adopt any one of several types because it, or a value it uses, has been given a separate definition for each of those types.</em></p>
<p>The simplest way to do ad-hoc polymorphism is by overloading functions. For example, having <code>plus(Int, Int)</code>, <code>plus(Currency, Currency)</code>, etc. The other ways are by using <a target="_blank" rel="noopener" href="http://scala.org.ua/presentations/scala-polymorphism/#/18">type classes</a>, and <a target="_blank" rel="noopener" href="http://scala.org.ua/presentations/scala-polymorphism/#/15">coercion</a>.  </p>
<h3 id="Type-Classes"><a href="#Type-Classes" class="headerlink" title="Type Classes"></a>Type Classes</h3><p>I’ll rewrite the <code>Plus[A]</code> example using type classes:  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Currency</span>(<span class="params">amount: <span class="type">Float</span>, code: <span class="type">String</span></span>)</span></span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">Currency</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Kilogram</span>(<span class="params">amount: <span class="type">Float</span></span>)</span></span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">Kilogram</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="class"><span class="keyword">trait</span> <span class="title">Plus</span>[<span class="type">A</span>] </span>{</span><br><span class="line">     |   <span class="function"><span class="keyword">def</span> <span class="title">plus</span></span>(a:<span class="type">A</span>, b: <span class="type">A</span>): <span class="type">A</span></span><br><span class="line">     | }</span><br><span class="line">defined <span class="class"><span class="keyword">trait</span> <span class="title">Plus</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="class"><span class="keyword">object</span> <span class="title">Plus</span> </span>{</span><br><span class="line">     |   <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">CurrencyPlus</span> <span class="keyword">extends</span> <span class="title">Plus</span>[<span class="type">Currency</span>]</span>{</span><br><span class="line">     |     <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">plus</span></span>(a: <span class="type">Currency</span>, b: <span class="type">Currency</span>): <span class="type">Currency</span> = <span class="type">Currency</span>(a.amount + b.amount, a.code)</span><br><span class="line">     |   }</span><br><span class="line">     |   <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">KilogramPlus</span> <span class="keyword">extends</span> <span class="title">Plus</span>[<span class="type">Kilogram</span>] </span>{</span><br><span class="line">     |     <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">plus</span></span>(a: <span class="type">Kilogram</span>, b: <span class="type">Kilogram</span>): <span class="type">Kilogram</span> = <span class="type">Kilogram</span>(a.amount + b.amount)</span><br><span class="line">     |   }</span><br><span class="line">     | }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">Plus</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">import</span> <span class="type">Plus</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Plus</span>._</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="function"><span class="keyword">def</span> <span class="title">plus</span></span>[<span class="type">A</span>](a: <span class="type">A</span>, b: <span class="type">A</span>)(<span class="keyword">implicit</span> p: <span class="type">Plus</span>[<span class="type">A</span>]) = p.plus(a, b)</span><br><span class="line">plus: [<span class="type">A</span>](a: <span class="type">A</span>, b: <span class="type">A</span>)(<span class="keyword">implicit</span> p: <span class="type">Plus</span>[<span class="type">A</span>])<span class="type">A</span></span><br><span class="line"></span><br><span class="line">scala&gt; plus(<span class="type">Currency</span>(<span class="number">1</span>, <span class="string">"USD"</span>), <span class="type">Currency</span>(<span class="number">1</span>, <span class="string">"USD"</span>))</span><br><span class="line">res0: <span class="type">Currency</span> = <span class="type">Currency</span>(<span class="number">2.0</span>,<span class="type">USD</span>)</span><br><span class="line"></span><br><span class="line">scala&gt; plus(<span class="type">Kilogram</span>(<span class="number">1</span>), <span class="type">Kilogram</span>(<span class="number">1</span>))</span><br><span class="line">res1: <span class="type">Kilogram</span> = <span class="type">Kilogram</span>(<span class="number">2.0</span>)</span><br></pre></td></tr></table></figure>  
<p>Relating the above implementation to the formal definition, the implicit <code>p</code> was able to adopt one of <code>CurrencyPlus</code> or <code>KilogramPlus</code> depending on what arguments were passed. Thus the behavior of <code>plus</code> is polymorphic as its behavior comes from the definition of each of the types.  </p>
<h3 id="Coercion"><a href="#Coercion" class="headerlink" title="Coercion"></a>Coercion</h3><p>The other way to implement ad-hoc polymorphism is coercion. Coercion refers to implicitly converting the argument into a type that the function expects. Here’s an example modeled around <a target="_blank" rel="noopener" href="https://github.com/scala/scala/blob/05016d9035ab9b1c866bd9f12fdd0491f1ea0cbb/src/library/scala/runtime/RichInt.scala">scala.runtime.RichInt</a>:  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="class"><span class="keyword">class</span> <span class="title">AwesomeInt</span>(<span class="params">val self: <span class="type">Int</span></span>) </span>{</span><br><span class="line">     |   <span class="function"><span class="keyword">def</span> <span class="title">absolute</span></span>: <span class="type">Int</span> = math.abs(self)</span><br><span class="line">     | }</span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">AwesomeInt</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="class"><span class="keyword">object</span> <span class="title">AwesomeInt</span> </span>{</span><br><span class="line">     |   <span class="keyword">import</span> scala.language.implicitConversions</span><br><span class="line">     |   <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">asAwesomeInt</span></span>(x: <span class="type">Int</span>): <span class="type">AwesomeInt</span> = <span class="keyword">new</span> <span class="type">AwesomeInt</span>(x)</span><br><span class="line">     | }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">AwesomeInt</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">import</span> <span class="type">AwesomeInt</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">AwesomeInt</span>._</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="number">-1.</span>absolute</span><br><span class="line">res0: <span class="type">Int</span> = <span class="number">1</span></span><br></pre></td></tr></table></figure>  
<p>The <code>absolute</code> method is defined in <code>AwesomeInt</code> but what we have is a plain old <code>Int</code>. This <code>Int</code> gets transformed into an <code>AwesomeInt</code> automagically because we have an implicit conversion within scope. The <code>Int</code> was coerced into an <code>AwesomeInt</code>.  </p>
<p>So we see how ad-hoc polymorphism allows us to extend classes to whose code we don’t have access. We defined <code>absolute</code> to work with <code>Int</code> which comes from the Scala core library.  </p>
<h2 id="Higher-Kinded-Types-HKT"><a href="#Higher-Kinded-Types-HKT" class="headerlink" title="Higher-Kinded Types (HKT)"></a>Higher-Kinded Types (HKT)</h2><p>In the post where we generalized <code>sum</code> function, we generalized it to work with a <code>List</code>. What if we want to generalize it even further so that it can work with not just list but anything? Here’s what we want to achieve:  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// we have this</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>[<span class="type">A</span>](xs: <span class="type">List</span>[<span class="type">A</span>])(<span class="keyword">implicit</span> m: <span class="type">Monoid</span>[<span class="type">A</span>]): <span class="type">A</span> = ???</span><br><span class="line"></span><br><span class="line"><span class="comment">// we want this</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>[<span class="type">M</span>[_], <span class="type">A</span>](xs: <span class="type">M</span>[<span class="type">A</span>])(<span class="keyword">implicit</span> m: <span class="type">Monoid</span>[<span class="type">A</span>], f: <span class="type">FoldLeft</span>[<span class="type">M</span>]): <span class="type">A</span> = ???</span><br></pre></td></tr></table></figure>
<p>The difference between the two is that the first version, although polymorphic over types for which we have monoids defined, is still heavily tied to <code>List</code>. The second version instead will work with type that is <code>FoldLeft</code>. We’ll expand upon the <code>sum</code> example<sup><a target="_blank" rel="noopener" href="http://bit.ly/c2eTVR">[6]</a></sup>. We’ll need the monoids and we’ll need to add a <code>FoldLeft</code> to make <code>sum</code> more generic.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> scala.language.higherKinds</span><br><span class="line"><span class="keyword">import</span> scala.language.higherKinds</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="class"><span class="keyword">trait</span> <span class="title">Monoid</span>[<span class="type">A</span>] </span>{</span><br><span class="line">     |   <span class="function"><span class="keyword">def</span> <span class="title">mempty</span></span>: <span class="type">A</span></span><br><span class="line">     |   <span class="function"><span class="keyword">def</span> <span class="title">mappend</span></span>(a: <span class="type">A</span>, b: <span class="type">A</span>): <span class="type">A</span></span><br><span class="line">     | }</span><br><span class="line">defined <span class="class"><span class="keyword">trait</span> <span class="title">Monoid</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="class"><span class="keyword">trait</span> <span class="title">FoldLeft</span>[<span class="type">F</span>[_]] </span>{</span><br><span class="line">     |   <span class="function"><span class="keyword">def</span> <span class="title">foldLeft</span></span>[<span class="type">A</span>, <span class="type">B</span>](xs: <span class="type">F</span>[<span class="type">A</span>], b: <span class="type">B</span>, f: (<span class="type">B</span>, <span class="type">A</span>) =&gt; <span class="type">B</span>): <span class="type">B</span></span><br><span class="line">     | }</span><br><span class="line">defined <span class="class"><span class="keyword">trait</span> <span class="title">FoldLeft</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="class"><span class="keyword">object</span> <span class="title">FoldLeft</span> </span>{</span><br><span class="line">     |   <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">FoldLeftList</span> <span class="keyword">extends</span> <span class="title">FoldLeft</span>[<span class="type">List</span>] </span>{</span><br><span class="line">     |     <span class="function"><span class="keyword">def</span> <span class="title">foldLeft</span></span>[<span class="type">A</span>, <span class="type">B</span>](xs: <span class="type">List</span>[<span class="type">A</span>], b: <span class="type">B</span>, f: (<span class="type">B</span>, <span class="type">A</span>) =&gt; <span class="type">B</span>): <span class="type">B</span> = xs.foldLeft(b)(f)</span><br><span class="line">     |   }</span><br><span class="line">     | }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">FoldLeft</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="class"><span class="keyword">object</span> <span class="title">Monoid</span> </span>{</span><br><span class="line">     |   <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">IntMonoid</span> <span class="keyword">extends</span> <span class="title">Monoid</span>[<span class="type">Int</span>] </span>{</span><br><span class="line">     |     <span class="function"><span class="keyword">def</span> <span class="title">mempty</span></span>: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">     |     <span class="function"><span class="keyword">def</span> <span class="title">mappend</span></span>(a: <span class="type">Int</span>, b: <span class="type">Int</span>) = a + b</span><br><span class="line">     |   }</span><br><span class="line">     | }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">Monoid</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">import</span> <span class="type">Monoid</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Monoid</span>._</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">import</span> <span class="type">FoldLeft</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">FoldLeft</span>._</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>[<span class="type">M</span>[_], <span class="type">T</span>](xs: <span class="type">M</span>[<span class="type">T</span>])(<span class="keyword">implicit</span> m: <span class="type">Monoid</span>[<span class="type">T</span>], f: <span class="type">FoldLeft</span>[<span class="type">M</span>]): <span class="type">T</span> = f.foldLeft(xs, m.mempty, m.mappend)</span><br><span class="line">sum: [<span class="type">M</span>[_], <span class="type">T</span>](xs: <span class="type">M</span>[<span class="type">T</span>])(<span class="keyword">implicit</span> m: <span class="type">Monoid</span>[<span class="type">T</span>], <span class="keyword">implicit</span> f: <span class="type">FoldLeft</span>[<span class="type">M</span>])<span class="type">T</span></span><br><span class="line"></span><br><span class="line">scala&gt; sum(<span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line">res0: <span class="type">Int</span> = <span class="number">6</span></span><br></pre></td></tr></table></figure>  
<p>So, by using HKT, we can generalize across types.   </p>
<h2 id="Pimp-My-Library"><a href="#Pimp-My-Library" class="headerlink" title="Pimp My Library"></a>Pimp My Library</h2><p>You might wonder what the whole point of using so much polymorphism is. The answer is that it lets you inject new functionality into existing libraries without having access to their source code. To quote Martin Odersky<sup><a target="_blank" rel="noopener" href="http://www.artima.com/weblogs/viewpost.jsp?thread=179766">[7]</a></sup>:  </p>
<p><em>There’s a fundamental difference between your own code and libraries of other people: You can change or extend your own code, but if you want to use some other libraries you have to take them as they are … Scala has implicit parameters and conversions. They can make existing libraries much more pleasant to deal with.</em>  </p>
<p>So, by using all the polymorphism techniques, we can implement the “pimp my library” pattern.<sup><a target="_blank" rel="noopener" href="http://groovy-lang.org/design-patterns.html#_pimp_my_library_pattern">[8]</a></sup></p>
<p><em>The Pimp my Library Pattern suggests an approach for extending a library that nearly does everything that you need but just needs a little more. It assumes that you do not have source code for the library of interest.</em></p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>The polymorphism capabilities provided by Scala allow Scalaz to provide its set of features. By using HKT we can write code that truly generalizes across multiple types. It might seem like a long-winded way to do something so simple but as codebase gets larger and larger, the features that Scalaz provides out-of-the-box really help in eliminating boilerplate code. We haven’t seen how to use Scalaz, yet. These posts serve as a foundation to understand how Scalaz does what it does.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/06/27/scalaz-types-of-polymorphism/" data-id="cm5ezcg2y004qa4ru04tb9gha" data-title="Scalaz Types of Polymorphism" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/06/27/scalaz-types-of-polymorphism/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-under-the-hoods" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/24/scalaz-under-the-hoods/" class="article-date">
  <time datetime="2017-06-24T10:22:04.000Z" itemprop="datePublished">2017-06-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/24/scalaz-under-the-hoods/">Scalaz Under the Hood</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>A lot of what Scalaz does is made possible by using ad-hoc polymorphism, traits, and implicits. I’ll explain how this works by borrowing from <a target="_blank" rel="noopener" href="http://bit.ly/c2eTVR">Nick Partridge’s talk on Scalaz</a>.  </p>
<h2 id="Motivating-Example"><a href="#Motivating-Example" class="headerlink" title="Motivating Example"></a>Motivating Example</h2><p>Let’s begin with a simple <code>sum</code> function that adds together all the elements in a <code>List[Int]</code>.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>(xs: <span class="type">List</span>[<span class="type">Int</span>]): <span class="type">Int</span> = xs.foldLeft(<span class="number">0</span>)( _ + _ )</span><br><span class="line">defined function sum</span><br></pre></td></tr></table></figure>  
<p>The <code>sum</code> function above works only with <code>List[Int]</code>. If we want to sum together a <code>List[Double]</code>, <code>List[Float]</code>, or a <code>List[String]</code>, we’d need a new implementation of <code>sum</code>. Our goal is to make <code>sum</code> function general so it would work with any of these.</p>
<h2 id="Step-1-Monoid"><a href="#Step-1-Monoid" class="headerlink" title="Step 1 - Monoid"></a>Step 1 - Monoid</h2><p>The first step towards generalizing <code>sum</code> is by using a monoid. A monoid is an algebraic structure with a single associative binary operation and an identity element.<sup><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Monoid">[1]</a></sup>. Since we are working with a <code>List[Int]</code>, let’s create an <code>IntMonoid</code>.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="class"><span class="keyword">object</span> <span class="title">IntMonoid</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mempty</span></span>: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mappend</span></span>(a: <span class="type">Int</span>, b: <span class="type">Int</span>): <span class="type">Int</span> = a + b</span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">IntMonoid</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>(xs: <span class="type">List</span>[<span class="type">Int</span>]) = xs.foldLeft(<span class="type">IntMonoid</span>.mempty)(<span class="type">IntMonoid</span>.mappend)</span><br><span class="line">defined function sum</span><br></pre></td></tr></table></figure> 
<p><code>mempty</code> is the identity or the zero value, and  <code>mappend</code> is the binary operation which produces another <code>Int</code> i.e. another value in the set. These names come from Haskell<sup><a target="_blank" rel="noopener" href="https://en.wikibooks.org/wiki/Haskell/Monoids">[2]</a></sup>. </p>
<h2 id="Step-2-Generalizing-the-Monoid"><a href="#Step-2-Generalizing-the-Monoid" class="headerlink" title="Step 2 - Generalizing the Monoid"></a>Step 2 - Generalizing the Monoid</h2><p>Next, we’ll generalize the monoid by creating a <code>Monoid[A]</code> so that <code>IntMonoid</code> is just a monoid on <code>Int</code>.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="class"><span class="keyword">trait</span> <span class="title">Monoid</span>[<span class="type">A</span>] </span>{</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mempty</span></span>: <span class="type">A</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mappend</span></span>(a: <span class="type">A</span>, b: <span class="type">A</span>): <span class="type">A</span></span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">trait</span> <span class="title">Monoid</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="class"><span class="keyword">object</span> <span class="title">IntMonoid</span> <span class="keyword">extends</span> <span class="title">Monoid</span>[<span class="type">Int</span>] </span>{</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mempty</span></span>: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mappend</span></span>(a: <span class="type">Int</span>, b: <span class="type">Int</span>) = a + b</span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">IntMonoid</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>[<span class="type">A</span>](xs: <span class="type">List</span>[<span class="type">A</span>], m: <span class="type">Monoid</span>[<span class="type">A</span>]): <span class="type">A</span> = xs.foldLeft(m.mempty)(m.mappend)</span><br><span class="line">defined function sum</span><br><span class="line"></span><br><span class="line">scala&gt; sum(<span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), <span class="type">IntMonoid</span>)</span><br><span class="line">res3: <span class="type">Int</span> = <span class="number">6</span></span><br></pre></td></tr></table></figure>  
<p>What we’ve done is create a general-purpose <code>sum</code> function whose working depends upon which monoid is passed to it. Now we can very easily sum a <code>List[String]</code> or a <code>List[Double]</code> by adding a corresponding monoid.  </p>
<h2 id="Step-3-Make-the-Monoid-Implicit"><a href="#Step-3-Make-the-Monoid-Implicit" class="headerlink" title="Step 3 - Make the Monoid Implicit"></a>Step 3 - Make the Monoid Implicit</h2><p>Next, we’ll make the monoid an implicit parameter to our <code>sum</code> function. We’ll also package our <code>IntMonoid</code> into a <code>Monoid</code> companion object and make it implicit. The reason for doing this is how Scala compiler resolves implicit values; it’ll look for implicit values in its scope. So, we bring <code>IntMonoid</code> within scope by importing from the <code>Monoid</code> companion object.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="class"><span class="keyword">trait</span> <span class="title">Monoid</span>[<span class="type">A</span>] </span>{</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mempty</span></span>: <span class="type">A</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mappend</span></span>(a: <span class="type">A</span>, b: <span class="type">A</span>): <span class="type">A</span></span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">trait</span> <span class="title">Monoid</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="class"><span class="keyword">object</span> <span class="title">Monoid</span> </span>{</span><br><span class="line">    <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">IntMonoid</span> <span class="keyword">extends</span> <span class="title">Monoid</span>[<span class="type">Int</span>] </span>{</span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">mempty</span></span>: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">mappend</span></span>(a: <span class="type">Int</span>, b: <span class="type">Int</span>) = a + b</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">Monoid</span></span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">import</span> <span class="type">Monoid</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Monoid</span>._</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>[<span class="type">A</span>](xs: <span class="type">List</span>[<span class="type">A</span>])(<span class="keyword">implicit</span> m: <span class="type">Monoid</span>[<span class="type">A</span>]): <span class="type">A</span> = xs.foldLeft(m.mempty)(m.mappend)</span><br><span class="line">defined function sum</span><br><span class="line"></span><br><span class="line">scala&gt; sum(<span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line">res4: <span class="type">Int</span> = <span class="number">6</span></span><br></pre></td></tr></table></figure>  
<p>So, what we’ve done is create a general-purpose <code>sum</code> function that works as long as there is a corresponding implicit monoid within scope. This is made possible by using ad-hoc polymorphism. I’ll cover ad-hoc polymorphism briefly in this post and defer providing a detailed explanation for a later post.  </p>
<h2 id="Ad-hoc-Polymorphism"><a href="#Ad-hoc-Polymorphism" class="headerlink" title="Ad-hoc Polymorphism"></a>Ad-hoc Polymorphism</h2><p>Ad-hoc polymorphism is a type of polymorphism in which polymorphic functions are invoked depending on the different argument types. One way to implement ad-hoc polymorphism that we already know about is function overloading where a different “version” of the function is invoked depending on the type of arguments. This is what we’ve done in the post where there is only a single function but an implementation is provided for different types. In other words, <code>sum</code> only knows how to be invoked but the behavior is provided by monoids. Another way to implement ad-hoc polymorphism is coercion where the argument is converted into a type which the function expects.  </p>
<p>So, by using ad-hoc polymorphism, Scalaz is able to provide general-purpose functions over existing types. Ad-hoc polymorphism is flexible in the sense that it lets you extend even those classes for which you do not have access to the source code i.e. classes from other libraries, etc.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/06/24/scalaz-under-the-hoods/" data-id="cm5ezcg33006qa4ruhoug59oc" data-title="Scalaz Under the Hood" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/06/24/scalaz-under-the-hoods/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-introduction" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/23/scalaz-introduction/" class="article-date">
  <time datetime="2017-06-23T09:50:22.000Z" itemprop="datePublished">2017-06-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/23/scalaz-introduction/">Scalaz Introduction</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h2><p>I’ve been using Scalaz for a while now and I remember not having any guides that provide a gentle introduction. It was a lot of scouring around, reading source code, and watching tech talks that gave me the understanding that I have now. This series of posts is intended at filling that gap by providing simple, step-by-step tutorials that will help you get productive quickly without compromising on the functional programming concepts. </p>
<h2 id="What-is-Scalaz"><a href="#What-is-Scalaz" class="headerlink" title="What is Scalaz?"></a>What is Scalaz?</h2><p>The documentation for Scalaz (pronounced Scala-zee or Scala-zed) states:</p>
<p><em>Scalaz is a Scala library for functional programming.</em><br><em>It provides purely functional data structures to complement those from the Scala standard library. It defines a set of foundational type classes (e.g. Functor, Monad) and corresponding instances for a large number of data structures.</em></p>
<p>In a nutshell, Scalaz aims to do three things:</p>
<li> Provide new datatypes that are not present in the core Scala library </li>
<li> Provide new operations on existing types a.k.a. pimp the library </li>
<li> Provide general-purpose functions so that you don't have to re-write them </li> 

<p>I’ll provide a quick example of each of these without going into any details.  </p>
<h2 id="New-Datatypes"><a href="#New-Datatypes" class="headerlink" title="New Datatypes"></a>New Datatypes</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="type">NonEmptyList</span>.nels(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">res0: scalaz.<span class="type">NonEmptyList</span>[<span class="type">Int</span>] = <span class="type">NonEmpty</span>[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br></pre></td></tr></table></figure>  
<p>Here we are creating a <code>NonEmptyList</code> which is a list that is guaranteed to have atleast one element i.e. it’s never empty.</p>
<h2 id="New-Operations-on-Existing-Types"><a href="#New-Operations-on-Existing-Types" class="headerlink" title="New Operations on Existing Types"></a>New Operations on Existing Types</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> o = <span class="type">Option</span>(<span class="number">3</span>)</span><br><span class="line">o: <span class="type">Option</span>[<span class="type">Int</span>] = <span class="type">Some</span>(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Scalaz way</span></span><br><span class="line">scala&gt; o some { _ + <span class="number">1</span> } none { <span class="number">0</span> }</span><br><span class="line">res0: <span class="type">Int</span> = <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Scala way</span></span><br><span class="line">scala&gt; o.fold(<span class="number">0</span>)( _ + <span class="number">1</span> )</span><br><span class="line">res1: <span class="type">Int</span> = <span class="number">4</span></span><br></pre></td></tr></table></figure>
<p>The first way of extracting value from an <code>Option</code> comes from Scalaz and is much more expressive compared to using <code>fold</code> from Scala standard library.  </p>
<h2 id="General-Purpose-Functions"><a href="#General-Purpose-Functions" class="headerlink" title="General-Purpose Functions"></a>General-Purpose Functions</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) |+| <span class="type">List</span>(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">res0: <span class="type">List</span>[<span class="type">Int</span>] = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br></pre></td></tr></table></figure>
<p>The <code>|+|</code> operator from Scalaz conveniently concatenated the two <code>List</code>s together.  </p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/06/23/scalaz-introduction/" data-id="cm5ezcg2x0049a4ru9sdaf4l2" data-title="Scalaz Introduction" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/06/23/scalaz-introduction/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/6/">← Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/algorithms/" style="font-size: 11.25px;">algorithms</a> <a href="/tags/architecture/" style="font-size: 17.5px;">architecture</a> <a href="/tags/category-theory/" style="font-size: 13.75px;">category theory</a> <a href="/tags/clojure/" style="font-size: 11.25px;">clojure</a> <a href="/tags/compilers/" style="font-size: 13.75px;">compilers</a> <a href="/tags/design-patterns/" style="font-size: 10px;">design patterns</a> <a href="/tags/epi/" style="font-size: 13.75px;">epi</a> <a href="/tags/functional-programming/" style="font-size: 20px;">functional programming</a> <a href="/tags/machine-learning/" style="font-size: 15px;">machine learning</a> <a href="/tags/math/" style="font-size: 12.5px;">math</a> <a href="/tags/misc/" style="font-size: 16.25px;">misc</a> <a href="/tags/python/" style="font-size: 13.75px;">python</a> <a href="/tags/scala/" style="font-size: 18.75px;">scala</a> <a href="/tags/scalaz/" style="font-size: 17.5px;">scalaz</a> <a href="/tags/testing/" style="font-size: 11.25px;">testing</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/12/27/Creating-a-realtime-data-platform-nullability/">Creating a realtime data platform - nullability</a>
          </li>
        
          <li>
            <a href="/2024/12/26/Creating-a-realtime-data-platform-evolving-the-schema/">Creating a realtime data platform - evolving the schema</a>
          </li>
        
          <li>
            <a href="/2024/12/24/Creating-a-realtime-data-platform-bringing-data-in/">Creating a realtime data platform - bringing data in</a>
          </li>
        
          <li>
            <a href="/2024/12/22/Creating-a-realtime-data-platform-creating-the-data/">Creating a realtime data platform - creating the data</a>
          </li>
        
          <li>
            <a href="/2024/12/18/Creating-a-data-wrehouse-with-Apache-Pinot-and-Debezium/">Creating a realtime data platform - the design</a>
          </li>
        
          <li>
            <a href="/2024/11/24/Property-based-testing-with-Hypothesis/">Property-based testing with Hypothesis</a>
          </li>
        
          <li>
            <a href="/2024/11/06/Programming-Puzzles-4/">Programming Puzzles 4</a>
          </li>
        
          <li>
            <a href="/2024/11/04/Programming-Puzzles-3/">Programming Puzzles 3</a>
          </li>
        
          <li>
            <a href="/2024/10/15/Low-Level-Design-1-Todo-List/">Low Level Design 1 - Todo List</a>
          </li>
        
          <li>
            <a href="/2024/08/03/Detecting-disguised-email-addresses-in-a-corpus-of-text/">Detecting disguised email addresses in a corpus of text</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2025 Fasih Khatib<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About Me</a>
  
    <a href="/principles" class="mobile-nav-link">Guiding Principles</a>
  
</nav>
    
<script>
  var disqus_shortname = 'https-thescalaguy-github-io';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>



<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>