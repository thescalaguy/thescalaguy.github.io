<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  
  <title>Fasih Khatib</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Fasih Khatib">
<meta property="og:url" content="http://fasihkhatib.com/page/7/index.html">
<meta property="og:site_name" content="Fasih Khatib">
<meta property="og:locale">
<meta property="article:author" content="Fasih Khatib">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Fasih Khatib" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Fasih Khatib</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About Me</a>
        
          <a class="main-nav-link" href="/principles">Guiding Principles</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://fasihkhatib.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-scalaz-either" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/17/scalaz-either/" class="article-date">
  <time datetime="2017-07-17T08:45:10.000Z" itemprop="datePublished">2017-07-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/17/scalaz-either/">Scalaz Either</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll look at <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/series/7.3.x/core/src/main/scala/scalaz/Either.scala">Scalaz <code>Either</code></a>. This is Scalaz’s version of the standard <a target="_blank" rel="noopener" href="http://www.scala-lang.org/api/2.9.3/scala/Either.html">Scala <code>Either</code></a>. Before we look at Scalaz <code>Either</code>, we’ll look at Scala <code>Either</code>.</p>
<h2 id="Scala-Either"><a href="#Scala-Either" class="headerlink" title="Scala Either"></a>Scala Either</h2><p>Let’s begin by going over the docs:<sup><a target="_blank" rel="noopener" href="http://www.scala-lang.org/api/2.12.0/scala/util/Either.html">[1]</a></sup>  </p>
<p><em>Represents a value of one of two possible types (a disjoint union.) Instances of Either are either an instance of Left or Right.<br>…<br>Convention dictates that Left is used for failure and Right is used for success.</em>  </p>
<p>With the definition out of the way, let’s look at some code. The example is modeled around the code in the official Scala <code>Either</code> docs.  </p>
<h3 id="Creating-an-Either"><a href="#Creating-an-Either" class="headerlink" title="Creating an Either"></a>Creating an Either</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="function"><span class="keyword">def</span> <span class="title">parseInt</span></span>(str: <span class="type">String</span>): <span class="type">Either</span>[<span class="type">String</span>, <span class="type">Int</span>] = {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">          <span class="type">Right</span>(str toInt)</span><br><span class="line">      } <span class="keyword">catch</span> {</span><br><span class="line">          <span class="keyword">case</span> e: <span class="type">Exception</span> =&gt; <span class="type">Left</span>(e getMessage)</span><br><span class="line">      }</span><br><span class="line">  }</span><br><span class="line">defined function parseInt</span><br></pre></td></tr></table></figure>
<p>Next, let’s create a case each of success and failure.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">val</span> success = parseInt(<span class="string">"2"</span>)</span><br><span class="line">success: <span class="type">Either</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Right</span>(<span class="number">2</span>)</span><br><span class="line">@ <span class="keyword">val</span> failure = parseInt(<span class="string">"apple"</span>)</span><br><span class="line">failure: <span class="type">Either</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Left</span>(<span class="string">"For input string: \"apple\""</span>)</span><br></pre></td></tr></table></figure>  
<h3 id="Using-a-for-Comprehension"><a href="#Using-a-for-Comprehension" class="headerlink" title="Using a for Comprehension"></a>Using a <code>for</code> Comprehension</h3><p>Scala <code>Either</code> is not a monad and so you cannot use it in a <code>for</code> comprehensions.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">for</span> {</span><br><span class="line">      n &lt;- success</span><br><span class="line">  } <span class="keyword">yield</span> n</span><br><span class="line">res3: <span class="type">Either</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Right</span>(<span class="number">2</span>)</span><br></pre></td></tr></table></figure> 
<p><hr></p>
<h4 id="NOTE"><a href="#NOTE" class="headerlink" title="NOTE:"></a>NOTE:</h4><p>Previously, Scala <code>Either</code> was not a monad so it couldn’t be used in <code>for</code> comprehensions. Now, it is a monad and can be used in <code>for</code> comprehensions.</p>
<hr> 

<h2 id="Scalaz-Either"><a href="#Scalaz-Either" class="headerlink" title="Scalaz Either"></a>Scalaz Either</h2><p>A valid question to ask is why would one use Scalaz <code>Either</code> when Scala <code>Either</code> is a monad. The answer is that Scalaz <code>Either</code> is a lot more convenient and powerful compared to Scala <code>Either</code>. Let’s begin by refactoring <code>parseInt</code> to return a Scalaz <code>Either</code>.  </p>
<h3 id="Creating-an-Either-1"><a href="#Creating-an-Either-1" class="headerlink" title="Creating an Either"></a>Creating an Either</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line">@ <span class="function"><span class="keyword">def</span> <span class="title">parseInt</span></span>(str: <span class="type">String</span>): <span class="type">String</span> \/ <span class="type">Int</span> = {</span><br><span class="line">      <span class="keyword">import</span> scala.util.{<span class="type">Try</span>, <span class="type">Success</span>, <span class="type">Failure</span>}</span><br><span class="line">      <span class="type">Try</span> { str toInt } <span class="keyword">match</span> {</span><br><span class="line">          <span class="keyword">case</span> <span class="type">Success</span>(n) =&gt; n.right[<span class="type">String</span>]</span><br><span class="line">          <span class="keyword">case</span> <span class="type">Failure</span>(e) =&gt; e.getMessage.left[<span class="type">Int</span>]</span><br><span class="line">      }</span><br><span class="line">  }</span><br><span class="line">defined function parseInt</span><br></pre></td></tr></table></figure>  
<p>Next, let’s create a case each of success and failure.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">val</span> success = parseInt(<span class="string">"2"</span>)</span><br><span class="line">success: <span class="type">String</span> \/ <span class="type">Int</span> = \/-(<span class="number">2</span>)</span><br><span class="line">@ <span class="keyword">val</span> failure = parseInt(<span class="string">"apple"</span>)</span><br><span class="line">failure: <span class="type">String</span> \/ <span class="type">Int</span> = -\/(<span class="string">"For input string: \"apple\""</span>)</span><br></pre></td></tr></table></figure>
<p>The return type of our function is indicated by <code>String \/ Int</code>. This means we may return a <code>String</code> on the left in case of failure and an <code>Int</code> on the right in case of success. We create right or left projections by calling <code>right</code> or <code>left</code>, respectively, and mentioning the type of the value that will be on the other side. For example, we call <code>right[String]</code> because the left side is a <code>String</code>. The right projection is indicated by <code>\/-</code> and left projection is indicated by <code>-\/</code>.  </p>
<h3 id="Using-a-for-Comprehension-1"><a href="#Using-a-for-Comprehension-1" class="headerlink" title="Using a for Comprehension"></a>Using a <code>for</code> Comprehension</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">for</span> {</span><br><span class="line">      n &lt;- success</span><br><span class="line">  } <span class="keyword">yield</span> n</span><br><span class="line">res12: <span class="type">String</span> \/ <span class="type">Int</span> = \/-(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>Because Scalaz <code>Either</code> is also a monad, it can be used in a <code>for</code> comprehension.  </p>
<h3 id="Checking-Left-or-Right"><a href="#Checking-Left-or-Right" class="headerlink" title="Checking Left or Right"></a>Checking Left or Right</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ success isRight</span><br><span class="line">res13: <span class="type">Boolean</span> = <span class="literal">true</span></span><br><span class="line">@ failure isLeft</span><br><span class="line">res14: <span class="type">Boolean</span> = <span class="literal">true</span></span><br></pre></td></tr></table></figure>  
<p>Akin to Scala <code>Either</code>, Scalaz <code>Either</code> also lets you check for left or right by calling <code>isLeft</code> or <code>isRight</code>, respectively.  </p>
<h3 id="Ternary-Operator"><a href="#Ternary-Operator" class="headerlink" title="Ternary Operator"></a>Ternary Operator</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ success ? <span class="string">"YES"</span> | <span class="string">"NO"</span></span><br><span class="line">res15: <span class="type">String</span> = <span class="string">"YES"</span></span><br></pre></td></tr></table></figure>  
<p>Scalaz <code>Either</code> provides you with a <code>getOrElse</code> which you can use to as a ternary operator using its symbolic representation <code>|</code>.  </p>
<h3 id="Folding-an-Either"><a href="#Folding-an-Either" class="headerlink" title="Folding an Either"></a>Folding an Either</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@ success fold(</span><br><span class="line">    left =&gt; <span class="number">-1</span>,</span><br><span class="line">    right =&gt; right + <span class="number">1</span></span><br><span class="line">  )</span><br><span class="line">res16: <span class="type">Int</span> = <span class="number">3</span></span><br><span class="line">@ failure fold(</span><br><span class="line">    left =&gt; <span class="number">-1</span>,</span><br><span class="line">    right =&gt; right + <span class="number">1</span></span><br><span class="line">  )</span><br><span class="line">res17: <span class="type">Int</span> = <span class="number">-1</span></span><br></pre></td></tr></table></figure>  
<p>Both Scala and Scalaz <code>Either</code> provide you with a <code>fold</code> method which run the first function if we have a left, or the second function if we have a right.  </p>
<h3 id="Converting-to-Validation"><a href="#Converting-to-Validation" class="headerlink" title="Converting to Validation"></a>Converting to Validation</h3><p>The single biggest difference between Scala <code>Either</code> and Scalaz <code>Either</code> is that Scalaz <code>Either</code> can be converted to other types like <code>Validation</code>, etc. For example, converting an <code>Either</code> to a <code>Validation</code> allows you to accumulate errors. As the code comments state:  </p>
<p><em><code>A \/ B</code> is also isomorphic to <code>Validation[A, B]</code>. The subtle but important difference is that <code>Applicative</code> instances for <code>Validation</code> accumulates errors (“lefts”)</em>  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1.</span>right validation</span><br><span class="line">res65: <span class="type">Validation</span>[<span class="type">Nothing</span>, <span class="type">Int</span>] = <span class="type">Success</span>(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>  
<p>We create a <code>Validation</code> by calling <code>validation</code> method on the <code>Either</code> instance. Depending on a left or right, we get either a <code>Success</code> or <code>Failure</code>.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Scalaz <code>Either</code> and Scala <code>Either</code> are pretty similar in the latest version of Scala (2.12, as of writing). Which one you decide to use depends upon your personal preference. My preference is to use Scalaz <code>Either</code> throughout my code if I am using other Scalaz features to maintain consistency.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/07/17/scalaz-either/" data-id="cmgyqxa0c004amzruakedet7d" data-title="Scalaz Either" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/07/17/scalaz-either/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-validation" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/11/scalaz-validation/" class="article-date">
  <time datetime="2017-07-11T09:33:41.000Z" itemprop="datePublished">2017-07-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/11/scalaz-validation/">Scalaz Validation</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>In this post we’ll look at Scalaz <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/c0e4b531847348e1fd533c7d3605fe69320dde91/core/src/main/scala/scalaz/Validation.scala"><code>Validation</code></a> which you can use to validate the data in your system. Data validation is a part and parcel of software development; you have to check the data that comes into your system or it may lead to unexpected behavior and / or cause your system to fail. Scalaz provides you with <code>Validation</code> to validate your data. <code>Validation</code> is an applicative functor. An applicative functor has more structure than a functor but less than a monad.<sup><a target="_blank" rel="noopener" href="https://wiki.haskell.org/Applicative_functor">[1]</a></sup>  </p>
<h2 id="Motivating-Example"><a href="#Motivating-Example" class="headerlink" title="Motivating Example"></a>Motivating Example</h2><p>So let’s say we have a <code>Version</code> class representing the major and minor version of our software like so:<sup><a target="_blank" rel="noopener" href="http://arosien.github.io/scalaz-base-talk-201208/#slide20">[2]</a></sup> </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Version</span>(<span class="params">major: <span class="type">Int</span>, minor: <span class="type">Int</span></span>)</span></span><br></pre></td></tr></table></figure>   
<p>Then, a negative value in either of major or minor would be invalid. We could ensure that we never get a negative value in either the major or minor by using <code>require</code> like so:<sup><a target="_blank" rel="noopener" href="http://arosien.github.io/scalaz-base-talk-201208/#slide23">[3]</a></sup>  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Version</span>(<span class="params">major: <span class="type">Int</span>, minor: <span class="type">Int</span></span>) </span>{</span><br><span class="line">  require(major &gt;= <span class="number">0</span>, <span class="string">"major must be &gt;= 0: %s"</span>.format(major))</span><br><span class="line">  require(minor &gt;= <span class="number">0</span>, <span class="string">"minor must be &gt;= 0: %s"</span>.format(minor))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>  
<p>The problem here is that we’ll have to handle exceptions and we don’t want side-effects. Let’s use <code>Validation</code> to do it in a more functional way.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="comment">// paste mode in Ammonite REPL is { .. CODE HERE .. } and not :paste</span></span><br><span class="line">@ {</span><br><span class="line">  <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Version</span>(<span class="params">major: <span class="type">Int</span>, minor: <span class="type">Int</span></span>)</span></span><br><span class="line">  <span class="class"><span class="keyword">object</span> <span class="title">Version</span> </span>{</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">createNew</span></span>(major: <span class="type">Int</span>, minor: <span class="type">Int</span>): <span class="type">Validation</span>[<span class="type">IllegalArgumentException</span>, <span class="type">Version</span>] = {</span><br><span class="line">            <span class="keyword">val</span> isValidMajor = (major &gt;= <span class="number">0</span>) ? <span class="literal">true</span> | <span class="literal">false</span></span><br><span class="line">            <span class="keyword">val</span> isValidMinor = (minor &gt;= <span class="number">0</span>) ? <span class="literal">true</span> | <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">            (isValidMajor, isValidMinor) <span class="keyword">match</span> {</span><br><span class="line">              <span class="keyword">case</span> (<span class="literal">false</span>, <span class="literal">true</span>) =&gt; <span class="keyword">new</span> <span class="type">IllegalArgumentException</span>(<span class="string">"major &lt; 0"</span>).failure</span><br><span class="line">              <span class="keyword">case</span> (<span class="literal">true</span>, <span class="literal">false</span>) =&gt; <span class="keyword">new</span> <span class="type">IllegalArgumentException</span>(<span class="string">"minor &lt; 0"</span>).failure</span><br><span class="line">              <span class="keyword">case</span> (<span class="literal">false</span>, <span class="literal">false</span>) =&gt; <span class="keyword">new</span> <span class="type">IllegalArgumentException</span>(<span class="string">"major and minor &lt; 0"</span>).failure</span><br><span class="line">              <span class="keyword">case</span> (<span class="literal">true</span>, <span class="literal">true</span>) =&gt; <span class="keyword">new</span> <span class="type">Version</span>(major, minor).success</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">     }</span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">Version</span></span></span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">Version</span></span></span><br><span class="line">@ <span class="type">Version</span>.createNew(<span class="number">-1</span>, <span class="number">-1</span>)</span><br><span class="line">res5: <span class="type">Validation</span>[<span class="type">IllegalArgumentException</span>, <span class="type">Version</span>] = <span class="type">Failure</span>(</span><br><span class="line">  java.lang.<span class="type">IllegalArgumentException</span>: major and minor &lt; <span class="number">0</span></span><br><span class="line">)</span><br><span class="line">@ <span class="type">Version</span>.createNew(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">res6: <span class="type">Validation</span>[<span class="type">IllegalArgumentException</span>, <span class="type">Version</span>] = <span class="type">Success</span>(<span class="type">Version</span>(<span class="number">1</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure>  
<p>What we’ve done here is add a <code>createNew</code> to the companion object of <code>Version</code> that returns a <code>Validation</code>. Validating the input can result in either a <code>Success</code> or <code>Failure</code>. We create a <code>Success</code> by calling <code>success</code> on the value and a <code>Failure</code> by calling <code>failure</code> on the value. Once we have a <code>Validation</code>, there are numerous ways in which we can deal with it.  </p>
<h3 id="Providing-Default-Values"><a href="#Providing-Default-Values" class="headerlink" title="Providing Default Values"></a>Providing Default Values</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">val</span> invalid = <span class="type">Version</span>.createNew(<span class="number">-1</span>, <span class="number">-1</span>)</span><br><span class="line">invalid: <span class="type">Validation</span>[<span class="type">IllegalArgumentException</span>, <span class="type">Version</span>] = <span class="type">Failure</span>(</span><br><span class="line">  java.lang.<span class="type">IllegalArgumentException</span>: major and minor &lt; <span class="number">0</span></span><br><span class="line">)</span><br><span class="line">@ <span class="keyword">val</span> <span class="keyword">default</span> = invalid | <span class="keyword">new</span> <span class="type">Version</span>(<span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">default</span>: <span class="type">Version</span> = <span class="type">Version</span>(<span class="number">1</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>  
<p>There’s a convenient <code>|</code> operator (<code>getOrElse</code>) that lets you provide a default value if the result of the validation is a <code>Failure</code>. Here we are assigning the value 1 to major and 0 to minor.  </p>
<h3 id="Folding-a-Validation"><a href="#Folding-a-Validation" class="headerlink" title="Folding a Validation"></a>Folding a Validation</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">val</span> valid = <span class="type">Version</span>.createNew(<span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">valid: <span class="type">Validation</span>[<span class="type">IllegalArgumentException</span>, <span class="type">Version</span>] = <span class="type">Success</span>(<span class="type">Version</span>(<span class="number">1</span>, <span class="number">0</span>))</span><br><span class="line">@ valid fold(</span><br><span class="line">    f =&gt; <span class="string">s"Validation failed because <span class="subst">${f getMessage}</span>"</span>.println,</span><br><span class="line">    v =&gt; <span class="string">s"Version is <span class="subst">$v</span>"</span>.println</span><br><span class="line">  )</span><br><span class="line"><span class="string">"Version is Version(1,0)"</span></span><br><span class="line">@ invalid fold(</span><br><span class="line">    f =&gt; <span class="string">s"Validation failed because <span class="subst">${f getMessage}</span>"</span>.println,</span><br><span class="line">    v =&gt; <span class="string">s"Version is <span class="subst">$v</span>"</span>.println</span><br><span class="line">  )</span><br><span class="line"><span class="string">"Validation failed because major and minor &lt; 0"</span></span><br></pre></td></tr></table></figure>  
<p>Akin to a disjunction, it’s possible to <code>fold</code> a <code>Validation</code>. <code>Failure</code> will be the first argument and <code>Success</code> will be the second. If you want to fold just on the <code>Success</code> part, you can use <code>foldRight</code>.  </p>
<p><hr></p>
<h5 id="NOTE"><a href="#NOTE" class="headerlink" title="NOTE:"></a>NOTE:</h5><p>Both <code>fold</code> and <code>foldRight</code> should return values. Here I’ve just printed out the values to the console which is a side-effect. I’ve done this to keep the examples simple.</p>
<hr>

<h3 id="Composing-Validations"><a href="#Composing-Validations" class="headerlink" title="Composing Validations"></a>Composing Validations</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@ {</span><br><span class="line">    <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Version</span>(<span class="params">major: <span class="type">Int</span>, minor: <span class="type">Int</span></span>)</span></span><br><span class="line">    <span class="class"><span class="keyword">object</span> <span class="title">Version</span> </span>{</span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">isValidMajor</span></span>(major: <span class="type">Int</span>) = </span><br><span class="line">        (major &gt;= <span class="number">0</span>) ?</span><br><span class="line">        major.success[<span class="type">IllegalArgumentException</span>] |</span><br><span class="line">        <span class="keyword">new</span> <span class="type">IllegalArgumentException</span>(<span class="string">"major &lt; 0"</span>).failure</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">isValidMinor</span></span>(minor: <span class="type">Int</span>) = </span><br><span class="line">        (minor &gt;= <span class="number">0</span>) ?</span><br><span class="line">        minor.success[<span class="type">IllegalArgumentException</span>] |</span><br><span class="line">        <span class="keyword">new</span> <span class="type">IllegalArgumentException</span>(<span class="string">"minor &lt; 0"</span>).failure</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">createNew</span></span>(major: <span class="type">Int</span>, minor: <span class="type">Int</span>) = {</span><br><span class="line">        (isValidMajor(major).toValidationNel |@| isValidMinor(minor).toValidationNel) {</span><br><span class="line">          <span class="type">Version</span>(_, _)</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">Version</span></span></span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">Version</span></span></span><br></pre></td></tr></table></figure>  
<p>When we started building the <code>Version</code> example, we used pattern matching to check if the major and minor versions were correct. However, there’s a more succinct way to collect all the errors. In the example above, we’ve turned <code>isValidMajor</code> and <code>isValidMinor</code> into methods that return a <code>Validation</code> instead of simply a <code>Boolean</code>.   </p>
<p>The magic is in <code>createNew</code>. Here we convert the <code>Validation</code> into a <code>NonEmptyList</code>. <code>toValidationNel</code> wraps the <code>Failure</code> in a <code>NonEmptyList</code> but keeps the <code>Success</code> as-is. The <code>|@|</code> is an <code>ApplicativeBuilder</code> which lets us combine the failures together. If we get all successes, we construct a <code>Version</code> out of it. Let’s see this in action:  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">val</span> bothInvalid = <span class="type">Version</span>.createNew(<span class="number">-1</span>, <span class="number">-1</span>)</span><br><span class="line">bothInvalid: <span class="type">Validation</span>[<span class="type">NonEmptyList</span>[<span class="type">IllegalArgumentException</span>], <span class="type">Version</span>] = <span class="type">Failure</span>(</span><br><span class="line">  <span class="type">NonEmpty</span>[java.lang.<span class="type">IllegalArgumentException</span>: major &lt; <span class="number">0</span>,java.lang.<span class="type">IllegalArgumentException</span>: minor &lt; <span class="number">0</span>]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">@ <span class="keyword">val</span> majorInvalid = <span class="type">Version</span>.createNew(<span class="number">-1</span>, <span class="number">0</span>)</span><br><span class="line">majorInvalid: <span class="type">Validation</span>[<span class="type">NonEmptyList</span>[<span class="type">IllegalArgumentException</span>], <span class="type">Version</span>] = <span class="type">Failure</span>(</span><br><span class="line">  <span class="type">NonEmpty</span>[java.lang.<span class="type">IllegalArgumentException</span>: major &lt; <span class="number">0</span>]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">@ <span class="keyword">val</span> minorInvalid = <span class="type">Version</span>.createNew(<span class="number">1</span>, <span class="number">-1</span>)</span><br><span class="line">minorInvalid: <span class="type">Validation</span>[<span class="type">NonEmptyList</span>[<span class="type">IllegalArgumentException</span>], <span class="type">Version</span>] = <span class="type">Failure</span>(</span><br><span class="line">  <span class="type">NonEmpty</span>[java.lang.<span class="type">IllegalArgumentException</span>: minor &lt; <span class="number">0</span>]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">@ <span class="keyword">val</span> bothValid = <span class="type">Version</span>.createNew(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">bothValid: <span class="type">Validation</span>[<span class="type">NonEmptyList</span>[<span class="type">IllegalArgumentException</span>], <span class="type">Version</span>] = <span class="type">Success</span>(<span class="type">Version</span>(<span class="number">1</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure>  
<p>So, in case of both the major and minor being invalid, we get a non-empty list with both the errors in it. This is very convenient and also very extensible. If you need to add an extra check, you can write a new <code>isValidXXX</code> method and make it return a <code>Validation</code>. You can then use the <code>ApplicativeBuilder</code> to your advantage. Using simply booleans would need checking a large number of possible cases.  </p>
<h3 id="Mapping-Success-and-Failure"><a href="#Mapping-Success-and-Failure" class="headerlink" title="Mapping Success and Failure"></a>Mapping <code>Success</code> and <code>Failure</code></h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">val</span> errMsgs = bothInvalid bimap(</span><br><span class="line">    f =&gt; f map { _.getMessage },</span><br><span class="line">    identity,</span><br><span class="line">  )</span><br><span class="line">errMsgs: <span class="type">Validation</span>[<span class="type">NonEmptyList</span>[<span class="type">String</span>], <span class="type">Version</span>] = <span class="type">Failure</span>(<span class="type">NonEmpty</span>[major &lt; <span class="number">0</span>,minor &lt; <span class="number">0</span>])</span><br></pre></td></tr></table></figure>  
<p>It’s possible to map over <code>Success</code> and <code>Failure</code> and apply any transformations you want. For example, we represent errors with <code>IllegalArgumentException</code>s and we may be coding a rest API and we’d like to send back the strings representing the errors. In the example above, I’ve used <code>bimap</code> to map <code>Success</code> and <code>Failure</code>. For every failure, I am extracting the string using <code>getMessage</code> and leaving the success as-is by using <code>identity</code>. </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">val</span> theVersion = bothValid bimap(</span><br><span class="line">    f =&gt; f map { _.getMessage },</span><br><span class="line">    identity,</span><br><span class="line">  )</span><br><span class="line">theVersion: <span class="type">Validation</span>[<span class="type">NonEmptyList</span>[<span class="type">String</span>], <span class="type">Version</span>] = <span class="type">Success</span>(<span class="type">Version</span>(<span class="number">1</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure>  
<p>Similar to <code>bimap</code> is <code>map</code> which just maps the <code>Success</code> part of the <code>Validation</code>.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">val</span> theValue = bothValid map { v =&gt; <span class="type">Version</span>(v.major + <span class="number">1</span>, v.minor * <span class="number">2</span>) }</span><br><span class="line">theValue: <span class="type">Validation</span>[<span class="type">NonEmptyList</span>[<span class="type">IllegalArgumentException</span>], <span class="type">Version</span>] = <span class="type">Success</span>(<span class="type">Version</span>(<span class="number">2</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>  
<p>Remember that <code>bimap</code> and <code>map</code> return a <code>Validation</code>. They don’t extract values out of it. You’ll have to use <code>fold</code>, etc. to get the values out.  </p>
<h3 id="Running-a-Side-Effect-on-Success"><a href="#Running-a-Side-Effect-on-Success" class="headerlink" title="Running a Side-Effect on Success"></a>Running a Side-Effect on <code>Success</code></h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ bothValid foreach { v =&gt; <span class="string">s"Begin build process for version <span class="subst">$v</span>"</span>.println }</span><br><span class="line"><span class="string">"Begin build process for version Version(1,1)"</span></span><br></pre></td></tr></table></figure>  
<p><code>foreach</code> lets you run a side-effecting function if the result of the <code>Validation</code> is a <code>Success</code>. For example, using the <code>Version</code>, you could begin a build process or similar.  </p>
<h3 id="Checking-if-it-is-a-Success-or-Failure"><a href="#Checking-if-it-is-a-Success-or-Failure" class="headerlink" title="Checking if it is a Success or Failure"></a>Checking if it is a <code>Success</code> or <code>Failure</code></h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">val</span> isSuccess = bothValid isSuccess</span><br><span class="line">isSuccess: <span class="type">Boolean</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">@ <span class="keyword">val</span> isFailure = bothInvalid isFailure</span><br><span class="line">isFailure: <span class="type">Boolean</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">@ <span class="keyword">val</span> isSuccessSatisfying = bothValid exists { _.major &lt; <span class="number">5</span> }</span><br><span class="line">isSuccessSatisfying: <span class="type">Boolean</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">@ <span class="keyword">val</span> isSuccessSatisfyingOrFailure = bothValid forall { _.major === <span class="number">5</span> }</span><br><span class="line">isSuccessSatisfyingOrFailure: <span class="type">Boolean</span> = <span class="literal">false</span></span><br></pre></td></tr></table></figure>  
<p>There are numerous ways in which we can check if the <code>Validation</code> resulted in a <code>Success</code> or a <code>Failure</code>. The simplest way is to use one of <code>isSuccess</code> or <code>isFailure</code>. Similarly, <code>exists</code> will return true if the validation is a success value satisfying the given predicate and <code>forall</code> will return true if the validation is a failure value or the success value satisfies the given predicate.  </p>
<h3 id="Converting-to-Other-Datatypes"><a href="#Converting-to-Other-Datatypes" class="headerlink" title="Converting to Other Datatypes"></a>Converting to Other Datatypes</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">val</span> list = bothValid toList</span><br><span class="line">list: <span class="type">List</span>[<span class="type">Version</span>] = <span class="type">List</span>(<span class="type">Version</span>(<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">@ <span class="keyword">val</span> stream = bothValid toStream</span><br><span class="line">stream: <span class="type">Stream</span>[<span class="type">Version</span>] = <span class="type">Stream</span>(<span class="type">Version</span>(<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">@ <span class="keyword">val</span> either = bothValid toEither</span><br><span class="line">either: <span class="type">Either</span>[<span class="type">NonEmptyList</span>[<span class="type">IllegalArgumentException</span>], <span class="type">Version</span>] = <span class="type">Right</span>(<span class="type">Version</span>(<span class="number">1</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure>  
<p>Scalaz also provides convenience methods to convert the <code>Validation</code> to different datatypes like <code>List</code>, <code>Stream</code>, <code>Either</code>, etc.  </p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>There’s a lot more methods than can be covered in a post. Hopefully this post gave you an idea about what’s possible with <code>Validation</code>s.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/07/11/scalaz-validation/" data-id="cmgyqxa0e005imzru6z4z9anm" data-title="Scalaz Validation" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/07/11/scalaz-validation/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-mapops" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/11/scalaz-mapops/" class="article-date">
  <time datetime="2017-07-11T06:47:09.000Z" itemprop="datePublished">2017-07-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/11/scalaz-mapops/">Scalaz MapOps</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll look at <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/fabab8f699d56279d6f2cc28d02cc2b768e314d7/core/src/main/scala/scalaz/syntax/std/MapOps.scala"><code>MapOps</code></a> and the goodies it provides to work with <code>Map</code>s. Examples galore!  </p>
<h3 id="Altering-a-Map"><a href="#Altering-a-Map" class="headerlink" title="Altering a Map"></a>Altering a Map</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"></span><br><span class="line"><span class="comment">// create two maps</span></span><br><span class="line">@ <span class="keyword">val</span> m1 = <span class="type">Map</span>(<span class="string">"a"</span> -&gt; <span class="number">1</span>, <span class="string">"b"</span> -&gt; <span class="number">2</span>)</span><br><span class="line">m1: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Map</span>(<span class="string">"a"</span> -&gt; <span class="number">1</span>, <span class="string">"b"</span> -&gt; <span class="number">2</span>)</span><br><span class="line">@ <span class="keyword">val</span> m2 = <span class="type">Map</span>(<span class="string">"b"</span> -&gt; <span class="number">2</span>, <span class="string">"c"</span> -&gt; <span class="number">3</span>)</span><br><span class="line">m2: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Map</span>(<span class="string">"b"</span> -&gt; <span class="number">2</span>, <span class="string">"c"</span> -&gt; <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// alter an existing key</span></span><br><span class="line">@ m1.alter(<span class="string">"b"</span>) { maybeValue =&gt; maybeValue some { v =&gt;  some(v + <span class="number">1</span>) } none { some(<span class="number">0</span>) } }</span><br><span class="line">res4: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Map</span>(<span class="string">"a"</span> -&gt; <span class="number">1</span>, <span class="string">"b"</span> -&gt; <span class="number">3</span>)</span><br></pre></td></tr></table></figure>  
<p><code>alter</code> lets you change the values associated with keys. In the example, we’re altering the value associated with key <code>b</code>. Since there may or may not be a value associated with <code>b</code>, we get an <code>Option</code> which we’ve named as <code>maybeValue</code>. We then use the <code>some { ... } none { ... }</code> construct to either add 1 in case there’s a value or initialize the key with 0. Also, since we need to return <code>Option</code>s, we use <code>some</code> and <code>none</code> again.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ m1.alter(<span class="string">"d"</span>) { maybeValue =&gt; maybeValue some { v =&gt; some(v + <span class="number">1</span>) } none { some(<span class="number">0</span>) } }</span><br><span class="line">res5: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Map</span>(<span class="string">"a"</span> -&gt; <span class="number">1</span>, <span class="string">"b"</span> -&gt; <span class="number">2</span>, <span class="string">"d"</span> -&gt; <span class="number">0</span>)</span><br></pre></td></tr></table></figure>  
<p>If the key does not exist, it will be added to the map.  </p>
<h3 id="Intersection"><a href="#Intersection" class="headerlink" title="Intersection"></a>Intersection</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ m1.intersectWith(m2) { _ + _ }</span><br><span class="line">res6: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Map</span>(<span class="string">"b"</span> -&gt; <span class="number">4</span>)</span><br><span class="line">@ m1.intersectWith(m2)((v1, v2) =&gt; v1 + v2)</span><br><span class="line">res7: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Map</span>(<span class="string">"b"</span> -&gt; <span class="number">4</span>)</span><br></pre></td></tr></table></figure>  
<p><code>intersectWith</code> lets you calculate the intersection of two maps. It expects a function that will accept values <code>v1</code> and <code>v2</code> from both the maps and return a new value which will become the value associated with the key in the new map. If you want to analyze the key before returning the value, you can use <code>intersectWithKey</code> which expects a function <code>(k, v1, v2) =&gt; { ... }</code>.  </p>
<h3 id="Mapping-Keys"><a href="#Mapping-Keys" class="headerlink" title="Mapping Keys"></a>Mapping Keys</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ m1 mapKeys { _.toUpperCase }</span><br><span class="line">res8: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Map</span>(<span class="string">"A"</span> -&gt; <span class="number">1</span>, <span class="string">"B"</span> -&gt; <span class="number">2</span>)</span><br></pre></td></tr></table></figure>  
<p><code>mapKeys</code> lets you change the keys without changing the values associated with them. Here, we’re converting them to uppercase.   </p>
<h3 id="Union"><a href="#Union" class="headerlink" title="Union"></a>Union</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ m1.unionWith(m2){ _ + _ }</span><br><span class="line">res9: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Map</span>(<span class="string">"a"</span> -&gt; <span class="number">1</span>, <span class="string">"b"</span> -&gt; <span class="number">4</span>, <span class="string">"c"</span> -&gt; <span class="number">3</span>)</span><br><span class="line">@ m1.unionWith(m2)((v1, v2) =&gt; v1 + v2)</span><br><span class="line">res10: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Map</span>(<span class="string">"a"</span> -&gt; <span class="number">1</span>, <span class="string">"b"</span> -&gt; <span class="number">4</span>, <span class="string">"c"</span> -&gt; <span class="number">3</span>)</span><br></pre></td></tr></table></figure>  
<p><code>unionWith</code> lets you calculate the union of two maps and expects a function that will accept values <code>v1</code> and <code>v2</code> from both maps and return a new value which will become the value associated with the key in the new map. Similarly, there’s <code>unionWithKey</code> which will pass the key as the first argument to the function.  </p>
<h3 id="Inserting-a-Value"><a href="#Inserting-a-Value" class="headerlink" title="Inserting a Value"></a>Inserting a Value</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@ m1.insertWith(<span class="string">"a"</span>, <span class="number">99</span>) { _ + _ }</span><br><span class="line">res11: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Map</span>(<span class="string">"a"</span> -&gt; <span class="number">100</span>, <span class="string">"b"</span> -&gt; <span class="number">2</span>)</span><br><span class="line">@ m1.insertWith(<span class="string">"a"</span>, <span class="number">99</span>)((v1, v2) =&gt; v1 + v2)</span><br><span class="line">res12: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Map</span>(<span class="string">"a"</span> -&gt; <span class="number">100</span>, <span class="string">"b"</span> -&gt; <span class="number">2</span>)</span><br><span class="line">@ m1.insertWith(<span class="string">"z"</span>, <span class="number">100</span>) { _ + _ }</span><br><span class="line">res13: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Map</span>(<span class="string">"a"</span> -&gt; <span class="number">1</span>, <span class="string">"b"</span> -&gt; <span class="number">2</span>, <span class="string">"z"</span> -&gt; <span class="number">100</span>)</span><br></pre></td></tr></table></figure>  
<p><code>insertWith</code> lets you insert a new key-value pair into the map. It also expects a function which will take values <code>v1</code> and <code>v2</code> as arguments to deal with cases where the key you’re trying to add already exists.  </p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>This brings us to the end of the post on <code>MapOps</code>. These extra functions make it very easy to work with an immutable <code>Map</code> by providing extra functionality not present in the Scala core library.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/07/11/scalaz-mapops/" data-id="cmgyqxa0d004smzru1he3bdhu" data-title="Scalaz MapOps" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/07/11/scalaz-mapops/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-booleanops" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/10/scalaz-booleanops/" class="article-date">
  <time datetime="2017-07-10T09:41:40.000Z" itemprop="datePublished">2017-07-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/10/scalaz-booleanops/">Scalaz BooleanOps</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll look at <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/c0e4b531847348e1fd533c7d3605fe69320dde91/core/src/main/scala/scalaz/syntax/std/BooleanOps.scala"><code>BooleanOps</code></a> and the goodies it provides to work with <code>Boolean</code>s. As always, we’ll go straight to examples.  </p>
<h3 id="Unless"><a href="#Unless" class="headerlink" title="Unless"></a>Unless</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line">@ <span class="keyword">val</span> t = <span class="literal">true</span></span><br><span class="line">t: <span class="type">Boolean</span> = <span class="literal">true</span></span><br><span class="line">@ <span class="keyword">val</span> f = <span class="literal">false</span></span><br><span class="line">f: <span class="type">Boolean</span> = <span class="literal">false</span></span><br><span class="line"><span class="comment">// executes the given side-effect if this boolean value is false</span></span><br><span class="line">@ t unless <span class="string">"this won't print"</span>.println</span><br><span class="line"></span><br><span class="line">@ f unless <span class="string">"this will print"</span>.println</span><br><span class="line"><span class="string">"this will print"</span></span><br></pre></td></tr></table></figure>  
<p>As the comment for <code>unless</code> states:  </p>
<p><em>Executes the given side-effect if this boolean value is false.</em>  </p>
<p>A mnemonic to remember the working is: “Unless the value is true, execute the side-effecting function”.  </p>
<h3 id="When"><a href="#When" class="headerlink" title="When"></a>When</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// executes the given side-effect if this boolean value is true</span></span><br><span class="line">@ t when <span class="string">"this will print"</span>.println</span><br><span class="line"><span class="string">"this will print"</span></span><br><span class="line"></span><br><span class="line">@ f when <span class="string">"this won't print"</span>.println</span><br></pre></td></tr></table></figure>  
<p>The “opposite” of <code>unless</code> is <code>when</code> which executes the function when the value is true. As the comment for <code>when</code> states:  </p>
<p><em>Executes the given side-effect if this boolean value is true.</em>   </p>
<p>A mnemonic to remember the working is: “When the value is true, execute the side-effecting function”.  </p>
<h3 id="Folding-a-Boolean"><a href="#Folding-a-Boolean" class="headerlink" title="Folding a Boolean"></a>Folding a Boolean</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ t fold[<span class="type">String</span>](<span class="string">"this will be returned when true"</span>, <span class="string">"this will be returned when false"</span>)</span><br><span class="line">res8: <span class="type">String</span> = <span class="string">"this will be returned when true"</span></span><br><span class="line">@ f fold[<span class="type">String</span>](<span class="string">"this will be returned when true"</span>, <span class="string">"this will be returned when false"</span>)</span><br><span class="line">res9: <span class="type">String</span> = <span class="string">"this will be returned when false"</span></span><br></pre></td></tr></table></figure>  
<p><code>fold</code> lets you decide what value to return depending on whether it is true or false.   </p>
<h3 id="Converting-to-an-Option"><a href="#Converting-to-an-Option" class="headerlink" title="Converting to an Option"></a>Converting to an Option</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ t option <span class="string">"this will create a Some() with this string in it"</span></span><br><span class="line">res10: <span class="type">Option</span>[<span class="type">String</span>] = <span class="type">Some</span>(<span class="string">"this will create a Some() with this string in it"</span>)</span><br><span class="line">@ f option <span class="string">"this will result in a None"</span></span><br><span class="line">res11: <span class="type">Option</span>[<span class="type">String</span>] = <span class="type">None</span></span><br></pre></td></tr></table></figure>  
<p><code>option</code> lets us convert a <code>Boolean</code> into an <code>Option</code> in a type-safe manner. A true results in a <code>Some</code> containing the value passed to <code>option</code> whereas a false results in an <code>Option</code> of whatever the type of the argument is.  </p>
<h3 id="Ternary-Operator"><a href="#Ternary-Operator" class="headerlink" title="Ternary Operator"></a>Ternary Operator</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ t ? <span class="string">"true"</span> | <span class="string">"false"</span></span><br><span class="line">res13: <span class="type">String</span> = <span class="string">"true"</span></span><br><span class="line">@ f ? <span class="string">"true"</span> | <span class="string">"false"</span></span><br><span class="line">res14: <span class="type">String</span> = <span class="string">"false"</span></span><br></pre></td></tr></table></figure>  
<p>Scalaz also provides a ternary operator to work with <code>Boolean</code>s. The ternary operator is actually a combination of <code>?</code> and <code>|</code>. <code>?</code> is the conditional operator that results in the creation of an object of <code>Conditional</code> and <code>|</code> is a method of that object.  </p>
<h3 id="Miscellaneous"><a href="#Miscellaneous" class="headerlink" title="Miscellaneous"></a>Miscellaneous</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ t ?? <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">res15: <span class="type">List</span>[<span class="type">Int</span>] = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">@ f ?? <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">res16: <span class="type">List</span>[<span class="type">Int</span>] = <span class="type">List</span>()</span><br></pre></td></tr></table></figure>  
<p><code>??</code> returns the given argument if the value is true, otherwise, the zero element for the type of the given argument. In our case, the “zero” element for <code>List</code> is an empty <code>List</code>.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ t !? <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">res17: <span class="type">List</span>[<span class="type">Int</span>] = <span class="type">List</span>()</span><br><span class="line">@ f !? <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">res18: <span class="type">List</span>[<span class="type">Int</span>] = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>   
<p><code>!?</code> is the opposite of <code>??</code> and returns the argument if the value is false or the zero element otherwise.  </p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>This brings us to the end of our post on <code>BooleanOps</code>. There’s a lot more functions provided but I’ve chosen to cover those which I feel will be the most useful.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/07/10/scalaz-booleanops/" data-id="cmgyqxa0c004nmzru03tlfmv1" data-title="Scalaz BooleanOps" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/07/10/scalaz-booleanops/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-tryops" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/06/scalaz-tryops/" class="article-date">
  <time datetime="2017-07-06T07:11:25.000Z" itemprop="datePublished">2017-07-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/06/scalaz-tryops/">Scalaz TryOps</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll look at <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/c0e4b531847348e1fd533c7d3605fe69320dde91/core/src/main/scala/scalaz/syntax/std/TryOps.scala"><code>TryOps</code></a> and the goodies it provides to work with <a target="_blank" rel="noopener" href="http://www.scala-lang.org/api/2.9.3/scala/util/Try.html"><code>scala.util.Try</code></a>. To recap, here’s what <code>Try</code> does:  </p>
<p><em>The Try type represents a computation that may either result in an exception, or return a successfully computed value. It’s similar to, but semantically different from the scala.util.Either type.</em>  </p>
<h3 id="Converting-to-a-Disjunction"><a href="#Converting-to-a-Disjunction" class="headerlink" title="Converting to a Disjunction"></a>Converting to a Disjunction</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line">@ <span class="keyword">import</span> scala.util.<span class="type">Try</span></span><br><span class="line"><span class="keyword">import</span> scala.util.<span class="type">Try</span></span><br><span class="line"><span class="comment">// an operation that may potentially throw an exception</span></span><br><span class="line">@ <span class="keyword">val</span> t1 = <span class="type">Try</span> { <span class="string">"1"</span>.toInt }</span><br><span class="line">t1: <span class="type">Try</span>[<span class="type">Int</span>] = <span class="type">Success</span>(<span class="number">1</span>)</span><br><span class="line"><span class="comment">// converting to a Scalaz disjunction</span></span><br><span class="line">@ <span class="keyword">val</span> disjunction = t1 toDisjunction</span><br><span class="line">disjunction: <span class="type">Throwable</span> \/ <span class="type">Int</span> = \/-(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>  
<p>The result of a <code>Try</code> is either a <code>Success</code> or  a <code>Failure</code>. This can very easily be translated to a Scalaz disjunction. A <code>Success</code> produces a right disjunction whereas a <code>Failure</code> produces a left disjunction.  </p>
<h3 id="Converting-to-a-Validation"><a href="#Converting-to-a-Validation" class="headerlink" title="Converting to a Validation"></a>Converting to a Validation</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">val</span> validation = t1 toValidation</span><br><span class="line">validation: <span class="type">Validation</span>[<span class="type">Throwable</span>, <span class="type">Int</span>] = <span class="type">Success</span>(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>  
<p>Similarly, if this <code>Try</code> were a part of validating your data like checking values in a JSON object, you can convert this to a Scalaz <code>Validation</code>.  </p>
<h3 id="Converting-to-a-ValidationNel"><a href="#Converting-to-a-ValidationNel" class="headerlink" title="Converting to a ValidationNel"></a>Converting to a ValidationNel</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">val</span> nel = t1 toValidationNel</span><br><span class="line">nel: <span class="type">ValidationNel</span>[<span class="type">Throwable</span>, <span class="type">Int</span>] = <span class="type">Success</span>(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>  
<p><code>ValidationNel</code> is useful for accumulating errors. We’ll cover all of this in coming posts.   </p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>This brings us to the end of the post on <code>TryOps</code>. In coming posts we’ll look at <code>Validation</code> type which lets us represent, as you might have guessed, the result of validating an input. Similarly, if we want to accumulate all the results of validating inputs, we use <code>ValidationNel</code>. Both of these are subjects of coming posts.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/07/06/scalaz-tryops/" data-id="cmgyqxa0e0058mzru096t0ogz" data-title="Scalaz TryOps" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/07/06/scalaz-tryops/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-tupleops" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/05/scalaz-tupleops/" class="article-date">
  <time datetime="2017-07-05T11:45:10.000Z" itemprop="datePublished">2017-07-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/05/scalaz-tupleops/">Scalaz TupleOps</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll look at <code>TupleOps</code> and the goodies it provides to work with <code>Tuple</code>s. There’s no <code>TupleOps.scala</code> file in the GitHub repo because the file is generated by <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/c0e4b531847348e1fd533c7d3605fe69320dde91/project/GenerateTupleW.scala"><code>GenerateTupleW</code></a>. You can see the code for <code>TupleOps</code> if you’re using an IDE like IntelliJ. There’s a number of <code>TupleNOps</code> classes like <code>Tuple2Ops[A, B]</code>, etc. all the way to <code>Tuple12Ops[A, B]</code>.   </p>
<p>With that said, let’s jump into examples. We’ll look at what <code>Tuple2Ops</code> provides us. Everything is analogous to <code>Tuple3Ops</code>, etc. It’s just the number of arguments to the methods that will change. </p>
<h3 id="Folding-a-Tuple"><a href="#Folding-a-Tuple" class="headerlink" title="Folding a Tuple"></a>Folding a Tuple</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line">@ (<span class="number">1</span>, <span class="number">2</span>) fold( (_1, _2) =&gt; _1 + _2 )</span><br><span class="line">res2: <span class="type">Int</span> = <span class="number">3</span></span><br></pre></td></tr></table></figure>  
<p><code>fold</code> in <code>Tuple2Ops</code> takes a function which accepts 2 arguments i.e. equal to the arity of the tuple. Here, we’re folding the tuple and adding together its two <code>Int</code> elements but you can do whatever you want.  </p>
<h3 id="Converting-to-IndexedSeq"><a href="#Converting-to-IndexedSeq" class="headerlink" title="Converting to IndexedSeq"></a>Converting to IndexedSeq</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ (<span class="number">1</span>, <span class="number">2</span>) toIndexedSeq</span><br><span class="line">res3: collection.immutable.<span class="type">IndexedSeq</span>[<span class="type">Int</span>] = <span class="type">Vector</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>  
<p>This one is self-explanatory. The tuple is converted to an <a target="_blank" rel="noopener" href="http://www.scala-lang.org/api/current/scala/collection/IndexedSeq.html"><code>IndexedSeq</code></a>.  </p>
<h3 id="Mapping-Elements-in-a-Tuple"><a href="#Mapping-Elements-in-a-Tuple" class="headerlink" title="Mapping Elements in a Tuple"></a>Mapping Elements in a Tuple</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ (<span class="number">1</span>, <span class="number">2</span>) mapElements(_1 =&gt; _1 * <span class="number">2</span>, _2 =&gt; _2 * <span class="number">2</span>)</span><br><span class="line">res4: (<span class="type">Int</span>, <span class="type">Int</span>) = (<span class="number">2</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>  
<p><code>mapElements</code> in <code>Tuple2Ops</code> takes 2 functions as arguments, 1 for each element of the tuple. The functions are then applied to their corresponding elements and the result is returned as a <code>Tuple</code>. In the example above, we’re just multiplying both the elements by 2.   </p>
<p>This is different from the <code>map</code> from the standard library. The <code>map</code> from the standard library only operates on the last element of the tuple.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ (<span class="number">1</span>, <span class="number">2</span>) map (_ * <span class="number">2</span>)</span><br><span class="line">res5: (<span class="type">Int</span>, <span class="type">Int</span>) = (<span class="number">1</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>That’s the end of the post on <code>TupleOps</code>. <code>TupleOps</code>‘s convenience methods can be used to manipulate tuples easily.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/07/05/scalaz-tupleops/" data-id="cmgyqxa0e005dmzruh8yjdk1n" data-title="Scalaz TupleOps" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/07/05/scalaz-tupleops/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-stringops" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/05/scalaz-stringops/" class="article-date">
  <time datetime="2017-07-05T08:50:50.000Z" itemprop="datePublished">2017-07-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/05/scalaz-stringops/">Scalaz StringOps</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll look at <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/c0e4b531847348e1fd533c7d3605fe69320dde91/core/src/main/scala/scalaz/syntax/std/StringOps.scala"><code>StringOps</code></a> and the goodies it provides to work with <code>String</code>s. Like we did last time, we’ll jump straight into examples.  </p>
<h3 id="Plural"><a href="#Plural" class="headerlink" title="Plural"></a>Plural</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="comment">// keep the doctor away</span></span><br><span class="line">@ <span class="string">"apple"</span> plural <span class="number">2</span></span><br><span class="line">res2: <span class="type">String</span> = <span class="string">"apples"</span></span><br><span class="line"><span class="comment">// oops!</span></span><br><span class="line">@ <span class="string">"dress"</span> plural <span class="number">3</span></span><br><span class="line">res3: <span class="type">String</span> = <span class="string">"dresss"</span></span><br><span class="line"><span class="comment">// singular</span></span><br><span class="line">@ <span class="string">"apple"</span> plural <span class="number">1</span></span><br><span class="line">res4: <span class="type">String</span> = <span class="string">"apple"</span></span><br><span class="line"><span class="comment">// is it Friday, yet?</span></span><br><span class="line">@ <span class="string">"day"</span> plural <span class="number">3</span></span><br><span class="line">res5: <span class="type">String</span> = <span class="string">"days"</span></span><br></pre></td></tr></table></figure>  
<p>Scalaz provides a convenient <code>plural</code> method on <code>String</code> to get its plural form. Going over the docs for <code>plural</code>:  </p>
<p><em>Returns the same String value if the given value is 1 otherwise pluralises this String by appending an “s” unless this String ends with “y” and not one of [“ay”, “ey”, “iy”, “oy”, “uy”] in which case the ‘y’ character is chopped and “ies” is appended.</em>  </p>
<p>This explains why the plural of “dress” was “dresss” with 3 “s”; <code>plural</code> simply appended an “s”. Nonetheless, this is a convenient method.  </p>
<h3 id="Non-Empty-List"><a href="#Non-Empty-List" class="headerlink" title="Non-Empty List"></a>Non-Empty List</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="string">"list"</span> charsNel</span><br><span class="line">res6: <span class="type">Option</span>[<span class="type">NonEmptyList</span>[<span class="type">Char</span>]] = <span class="type">Some</span>(<span class="type">NonEmpty</span>[l,i,s,t])</span><br><span class="line">@ <span class="string">""</span> charsNel</span><br><span class="line">res7: <span class="type">Option</span>[<span class="type">NonEmptyList</span>[<span class="type">Char</span>]] = <span class="type">None</span></span><br></pre></td></tr></table></figure>  
<p><code>charsNel</code> converts the <code>String</code> into an <code>Option[NonEmptyList[Char]]</code>. This method is useful if the string represents a sequence of actions to be taken as characters. For example, “OCOC” could mean “Open, Close, Open, Close” or something and <code>charsNel</code> would convert this into an <code>Option</code> of <code>NonEmptyList[Char]</code>. You can then iterate over the characters and take whatever action you want to. </p>
<h3 id="Parsing"><a href="#Parsing" class="headerlink" title="Parsing"></a>Parsing</h3><p>Scalaz provides convenient methods for parsing a <code>String</code> into <code>Boolean</code>, <code>Int</code>, etc. The advantage of using these over standard Scala parsing methods is that these methods return a <code>Validation</code>. You can then fold the <code>Validation</code> object to see whether the value was successfully parsed or resulted in an error. This is good for functional programming as you don’t have to catch exceptions. We’ll first look at the Scala way and then the Scalaz way.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Scala way</span></span><br><span class="line">@ <span class="string">"1"</span>.toInt</span><br><span class="line">res8: <span class="type">Int</span> = <span class="number">1</span></span><br><span class="line">@ <span class="string">"x"</span>.toInt</span><br><span class="line">java.lang.<span class="type">NumberFormatException</span>: <span class="type">For</span> input string: <span class="string">"x"</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">// Scalaz way</span></span><br><span class="line">@ <span class="string">"1"</span>.parseInt.fold(err =&gt; <span class="string">"failed parse"</span>.println, num =&gt; num.println)</span><br><span class="line"><span class="number">1</span></span><br><span class="line">@ <span class="string">"x"</span>.parseInt.fold(err =&gt; <span class="string">"failed parse"</span>.println, num =&gt; num.println)</span><br><span class="line"><span class="string">"failed parse"</span></span><br></pre></td></tr></table></figure>  
<p>It’s also possible to parse values to <code>BigDecimal</code> and <code>BigInt</code>.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="string">"3.14159265358979323846"</span>.parseBigDecimal.fold(err =&gt; <span class="string">"failed parse"</span>.println, num =&gt; num.println)</span><br><span class="line"><span class="number">3.14159265358979323846</span></span><br></pre></td></tr></table></figure>  
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>This covers the convenience methods Scalaz provides for dealing with <code>String</code>s. The <code>parseXXX</code> methods are the most useful as they avoid having to deal with an exception.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/07/05/scalaz-stringops/" data-id="cmgyqxa0e005bmzrufc1k6wjs" data-title="Scalaz StringOps" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/07/05/scalaz-stringops/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-optionops" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/04/scalaz-optionops/" class="article-date">
  <time datetime="2017-07-04T10:50:10.000Z" itemprop="datePublished">2017-07-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/04/scalaz-optionops/">Scalaz OptionOps</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll look at <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/c0e4b531847348e1fd533c7d3605fe69320dde91/core/src/main/scala/scalaz/syntax/std/OptionOps.scala"><code>OptionOps</code></a> and the goodies it provides to work with <code>Option</code>s. We’ll jump straight into examples.  </p>
<h3 id="Creating-Options"><a href="#Creating-Options" class="headerlink" title="Creating Options"></a>Creating Options</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="comment">// Some</span></span><br><span class="line">@ some(<span class="number">13</span>)</span><br><span class="line">res2: <span class="type">Option</span>[<span class="type">Int</span>] = <span class="type">Some</span>(<span class="number">13</span>)</span><br><span class="line"><span class="comment">// Calling some on a value</span></span><br><span class="line"><span class="comment">// Notice something about res variable? ;)</span></span><br><span class="line">@ <span class="number">13.</span>some</span><br><span class="line">res9: <span class="type">Option</span>[<span class="type">Int</span>] = <span class="type">Some</span>(<span class="number">13</span>)</span><br><span class="line"><span class="comment">// None</span></span><br><span class="line">@ none</span><br><span class="line">res3: <span class="type">Option</span>[<span class="type">Nothing</span>] = <span class="type">None</span></span><br><span class="line">@ none[<span class="type">Int</span>]</span><br><span class="line">res4: <span class="type">Option</span>[<span class="type">Int</span>] = <span class="type">None</span></span><br></pre></td></tr></table></figure>  
<h3 id="Extracting-Values"><a href="#Extracting-Values" class="headerlink" title="Extracting Values"></a>Extracting Values</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// using unary ~ operator</span></span><br><span class="line">@ ~ res2</span><br><span class="line">res5: <span class="type">Int</span> = <span class="number">13</span></span><br><span class="line"><span class="comment">// using some / none</span></span><br><span class="line">@ res2 some { _ * <span class="number">2</span> } none { <span class="number">0</span> }</span><br><span class="line">res6: <span class="type">Int</span> = <span class="number">26</span></span><br><span class="line"><span class="comment">// using | operator</span></span><br><span class="line">@ res2 | <span class="number">0</span></span><br><span class="line">res7: <span class="type">Int</span> = <span class="number">13</span></span><br><span class="line"><span class="comment">// extracting value from none</span></span><br><span class="line">@ ~ res4</span><br><span class="line">res8: <span class="type">Int</span> = <span class="number">0</span></span><br></pre></td></tr></table></figure>  
<p>The unary <code>~</code> extracts the value from the <code>Option</code> or returns the zero value for that type. For example, in case of <code>Int</code> it’ll return the value in the <code>Option</code> or return 0. The <code>some{ .. } none { .. }</code> construct lets you specify what value to return in case of <code>Some</code> and <code>None</code>. I am multiplying the value by 2 and thus returning 26. As you can see, Scalaz provides with more expressive and type-safe way to create and extract values from <code>Option</code>.   </p>
<p>Notice that the type of all the resulting variables is <code>Option</code> instead of <code>Some</code> or <code>None</code>. This is more type-safe than using <code>None</code> because you’d get <code>None.type</code>, and the type inferencer would allow the type to be <code>Option[Int]</code> or <code>Option[String]</code> whereas <code>none[Int]</code> is guaranteed to be an <code>Option[Int]</code>. The type inferencer will enforce this. </p>
<h3 id="Miscellaneous"><a href="#Miscellaneous" class="headerlink" title="Miscellaneous"></a>Miscellaneous</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// we'll have fun with these values</span></span><br><span class="line">@ <span class="keyword">val</span> o = some(<span class="string">"option"</span>)</span><br><span class="line">o: <span class="type">Option</span>[<span class="type">String</span>] = <span class="type">Some</span>(<span class="string">"option"</span>)</span><br><span class="line">@ <span class="keyword">val</span> n = none[<span class="type">String</span>]</span><br><span class="line">n: <span class="type">Option</span>[<span class="type">String</span>] = <span class="type">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// None to right disjunction</span></span><br><span class="line">@ n toRightDisjunction <span class="string">"onTheLeft"</span></span><br><span class="line">res10: <span class="type">String</span> \/ <span class="type">String</span> = -\/(<span class="string">"onTheLeft"</span>)</span><br><span class="line"><span class="comment">// Folding the disjunction prints the value on the left</span></span><br><span class="line">@ res10 fold(l =&gt; <span class="string">s"Left: <span class="subst">$l</span>"</span>.println, r =&gt; <span class="string">s"Right: <span class="subst">$r</span>"</span>.println)</span><br><span class="line"><span class="string">"Left: onTheLeft"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Some to right disjunction</span></span><br><span class="line">@ o toRightDisjunction <span class="string">"onTheLeft"</span></span><br><span class="line">res11: <span class="type">String</span> \/ <span class="type">String</span> = \/-(<span class="string">"option"</span>)</span><br><span class="line"><span class="comment">// Folding the disjunction prints the value on the right</span></span><br><span class="line">@ res11 fold(l =&gt; <span class="string">s"Left: <span class="subst">$l</span>"</span>.println, r =&gt; <span class="string">s"Right: <span class="subst">$r</span>"</span>.println)</span><br><span class="line"><span class="string">"Right: option"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// default values, similar to unary ~</span></span><br><span class="line">@ n.orZero</span><br><span class="line">res12: <span class="type">String</span> = <span class="string">""</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ternary operator</span></span><br><span class="line">@ o ? <span class="string">"some"</span> | <span class="string">"none"</span></span><br><span class="line">res13: <span class="type">String</span> = <span class="string">"some"</span></span><br></pre></td></tr></table></figure>  
<p>Scalaz provides us with a disjunction which is a replacement for Scala <code>Either</code>. I’ve only introduced disjunction here and will cover it later in a post of its own. Trying to convert a <code>None</code> to a right disjunction doesn’t work. We get back a left disjunction as indicated by <code>-\/</code>. Similarly, converting a <code>Some</code> to right disjunction works, as indicated by <code>\/-</code>. Scalaz also provides a ternary operator to work with <code>Option</code>s. </p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>This sums up, non-exhaustively, how we can use the convenience methods that Scalaz provides on top of <code>Option</code>s that lets us code in more expressive and type-safe way. </p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/07/04/scalaz-optionops/" data-id="cmgyqxa0d0052mzru70brfdui" data-title="Scalaz OptionOps" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/07/04/scalaz-optionops/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-enum" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/03/scalaz-enum/" class="article-date">
  <time datetime="2017-07-03T14:20:05.000Z" itemprop="datePublished">2017-07-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/03/scalaz-enum/">Scalaz Enum</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll look at how to create enum using Scalaz. However, we’ll first look at how to create enum using standard Scala library.  </p>
<h2 id="Enum-Scala-Way"><a href="#Enum-Scala-Way" class="headerlink" title="Enum - Scala Way"></a>Enum - Scala Way</h2><p><em>An enum type is a special data type that enables for a variable to be a set of predefined constants. The variable must be equal to one of the values that have been predefined for it. Common examples include compass directions (values of NORTH, SOUTH, EAST, and WEST) and the days of the week.</em><sup><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html">[1]</a></sup>   </p>
<p>There are a couple of ways in which you can create enum in Scala.  </p>
<h3 id="Using-scala-Enumeration"><a href="#Using-scala-Enumeration" class="headerlink" title="Using scala.Enumeration"></a>Using <a target="_blank" rel="noopener" href="http://www.scala-lang.org/api/current/scala/Enumeration.html"><code>scala.Enumeration</code></a></h3><p><em>Defines a finite set of values specific to the enumeration. Typically these values enumerate all possible forms something can take and provide a lightweight alternative to case classes.</em>  </p>
<p>Let’s see an example:  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="class"><span class="keyword">object</span> <span class="title">Direction</span> <span class="keyword">extends</span> <span class="title">Enumeration</span> </span>{</span><br><span class="line">    <span class="class"><span class="keyword">type</span> <span class="title">Direction</span> </span>= <span class="type">Value</span></span><br><span class="line">    <span class="keyword">val</span> <span class="type">NORTH</span>, <span class="type">EAST</span>, <span class="type">WEST</span>, <span class="type">SOUTH</span> = <span class="type">Value</span></span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">Direction</span></span></span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Direction</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Direction</span>._</span><br><span class="line">@ <span class="type">Direction</span> withName <span class="string">"NORTH"</span></span><br><span class="line">res2: <span class="type">Value</span> = <span class="type">NORTH</span></span><br><span class="line">@ <span class="type">Direction</span>.values foreach println</span><br><span class="line"><span class="type">NORTH</span></span><br><span class="line"><span class="type">EAST</span></span><br><span class="line"><span class="type">WEST</span></span><br><span class="line"><span class="type">SOUTH</span></span><br></pre></td></tr></table></figure>    
<p>Advantages:  </p>
<li> Lightweight. </li>
<li> Easy to use. </li>
<li> Iterable. </li>  


<p>Disadvantages:</p>
<li> They only exist as unique values. You cannot add behavior to them. </li>

<h3 id="Using-Case-Objects"><a href="#Using-Case-Objects" class="headerlink" title="Using Case Objects"></a>Using Case Objects</h3><p>Enum can also be created using <code>sealed trait</code>. A sealed trait requires all the classes or traits extending it be in the same file in which it is defined.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="class"><span class="keyword">object</span> <span class="title">Direction</span> </span>{</span><br><span class="line">    <span class="keyword">sealed</span> <span class="class"><span class="keyword">trait</span> <span class="title">Direction</span></span></span><br><span class="line">    <span class="keyword">case</span> <span class="class"><span class="keyword">object</span> <span class="title">NORTH</span> <span class="keyword">extends</span> <span class="title">Direction</span></span></span><br><span class="line">    <span class="keyword">case</span> <span class="class"><span class="keyword">object</span> <span class="title">EAST</span> <span class="keyword">extends</span> <span class="title">Direction</span></span></span><br><span class="line">    <span class="keyword">case</span> <span class="class"><span class="keyword">object</span> <span class="title">WEST</span> <span class="keyword">extends</span> <span class="title">Direction</span></span></span><br><span class="line">    <span class="keyword">case</span> <span class="class"><span class="keyword">object</span> <span class="title">SOUTH</span> <span class="keyword">extends</span> <span class="title">Direction</span></span></span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">Direction</span></span></span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Direction</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Direction</span>._</span><br></pre></td></tr></table></figure>  
<p>Advantages:  </p>
<li> Each value is an instance of its own type and it's possible to add behavior to them. </li>  

<p>Disadvantages:  </p>
<li> A case object generates a lot more code than `Enumeration`. </li>  
<li> Not iterable. </li>  

<h2 id="Enum-Scalaz-Way"><a href="#Enum-Scalaz-Way" class="headerlink" title="Enum - Scalaz Way"></a>Enum - Scalaz Way</h2><p>Scalaz allows creating enum using <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/fabab8f699d56279d6f2cc28d02cc2b768e314d7/core/src/main/scala/scalaz/Enum.scala"><code>Enum</code></a> trait. Scalaz enums are more powerful than the standard Scala enums. Let’s see some examples of creating Scalaz enum<sup><a target="_blank" rel="noopener" href="http://eed3si9n.com/learning-scalaz/Enum.html">[2]</a></sup>:  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="comment">// as a List</span></span><br><span class="line">@ 'a' |-&gt; 'z'</span><br><span class="line">res3: <span class="type">List</span>[<span class="type">Char</span>] = <span class="type">List</span>(</span><br><span class="line">  'a',</span><br><span class="line">  'b',</span><br><span class="line">  'c',</span><br><span class="line">  'd',</span><br><span class="line">  'e',</span><br><span class="line">  'f',</span><br><span class="line">  ...</span><br><span class="line"><span class="comment">// as a Scalaz stream</span></span><br><span class="line">@ 'a' |=&gt; 'z'</span><br><span class="line">res4: <span class="type">EphemeralStream</span>[<span class="type">Char</span>] = scalaz.<span class="type">EphemeralStream</span>$$anon$<span class="number">5</span>@<span class="number">2</span>fb4925c</span><br></pre></td></tr></table></figure>
<p>Scalaz also provides us with <code>succ</code> and <code>pred</code> to get the successor and predecessor.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ '<span class="type">B</span>'.succ</span><br><span class="line">res6: <span class="type">Char</span> = '<span class="type">C</span>'</span><br><span class="line">@ '<span class="type">B</span>'.pred</span><br><span class="line">res7: <span class="type">Char</span> = '<span class="type">A</span>'</span><br></pre></td></tr></table></figure>  
<p>It’s also possible to easily step through the enumeration.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3 steps forwards</span></span><br><span class="line">@ '<span class="type">B</span>' -+- <span class="number">3</span></span><br><span class="line">res8: <span class="type">Char</span> = '<span class="type">E</span>'</span><br><span class="line"><span class="comment">// 3 steps backwards</span></span><br><span class="line">@ '<span class="type">B</span>' --- <span class="number">3</span></span><br><span class="line">res9: <span class="type">Char</span> = '?'</span><br></pre></td></tr></table></figure>  
<p>You can also get min and max values for an enumeration.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ implicitly[<span class="type">Enum</span>[<span class="type">Int</span>]].min</span><br><span class="line">res10: <span class="type">Option</span>[<span class="type">Int</span>] = <span class="type">Some</span>(<span class="number">-2147483648</span>)</span><br><span class="line">@ implicitly[<span class="type">Enum</span>[<span class="type">Int</span>]].max</span><br><span class="line">res11: <span class="type">Option</span>[<span class="type">Int</span>] = <span class="type">Some</span>(<span class="number">2147483647</span>)</span><br></pre></td></tr></table></figure>
<p>Let’s create our own enumeration using Scalaz <code>Enum</code>.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line">@ <span class="class"><span class="keyword">object</span> <span class="title">Size</span> </span>{</span><br><span class="line">    <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Size</span>(<span class="params">val size: <span class="type">Int</span>, val name: <span class="type">String</span></span>)</span></span><br><span class="line">    <span class="keyword">val</span> <span class="type">SMALL</span> = <span class="type">Size</span>(<span class="number">0</span>, <span class="string">"SMALL"</span>)</span><br><span class="line">    <span class="keyword">val</span> <span class="type">MEDIUM</span> = <span class="type">Size</span>(<span class="number">1</span>, <span class="string">"MEDIUM"</span>)</span><br><span class="line">    <span class="keyword">val</span> <span class="type">LARGE</span> = <span class="type">Size</span>(<span class="number">2</span>, <span class="string">"LARGE"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">SizeEnum</span> <span class="keyword">extends</span> <span class="title">Enum</span>[<span class="type">Size</span>] <span class="keyword">with</span> <span class="title">Show</span>[<span class="type">Size</span>] </span>{</span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">order</span></span>(s1: <span class="type">Size</span>, s2: <span class="type">Size</span>): <span class="type">Ordering</span> = (s1.size compare s2.size) <span class="keyword">match</span> {</span><br><span class="line">          <span class="keyword">case</span> <span class="number">-1</span> =&gt; <span class="type">Ordering</span>.<span class="type">LT</span></span><br><span class="line">          <span class="keyword">case</span> <span class="number">0</span> =&gt; <span class="type">Ordering</span>.<span class="type">EQ</span></span><br><span class="line">          <span class="keyword">case</span> <span class="number">1</span> =&gt; <span class="type">Ordering</span>.<span class="type">GT</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">succ</span></span>(s: <span class="type">Size</span>): <span class="type">Size</span> = s <span class="keyword">match</span> {</span><br><span class="line">          <span class="keyword">case</span> <span class="type">SMALL</span> =&gt; <span class="type">MEDIUM</span></span><br><span class="line">          <span class="keyword">case</span> <span class="type">MEDIUM</span> =&gt; <span class="type">LARGE</span></span><br><span class="line">          <span class="keyword">case</span> <span class="type">LARGE</span> =&gt; <span class="type">SMALL</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">pred</span></span>(s: <span class="type">Size</span>): <span class="type">Size</span> = s <span class="keyword">match</span> {</span><br><span class="line">          <span class="keyword">case</span> <span class="type">SMALL</span> =&gt; <span class="type">LARGE</span></span><br><span class="line">          <span class="keyword">case</span> <span class="type">MEDIUM</span> =&gt; <span class="type">SMALL</span></span><br><span class="line">          <span class="keyword">case</span> <span class="type">LARGE</span> =&gt; <span class="type">MEDIUM</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">zero</span></span>: <span class="type">Size</span> = <span class="type">SMALL</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">shows</span></span>(s: <span class="type">Size</span>) = s.name</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">max</span> </span>= <span class="type">Some</span>(<span class="type">LARGE</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">min</span> </span>= <span class="type">Some</span>(<span class="type">SMALL</span>)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">Size</span></span></span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Size</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Size</span>._</span><br><span class="line"><span class="comment">// step through</span></span><br><span class="line">@ <span class="type">SMALL</span> -+- <span class="number">1</span></span><br><span class="line">res4: <span class="type">Size</span> = <span class="type">Size</span>(<span class="number">1</span>, <span class="string">"MEDIUM"</span>)</span><br><span class="line"><span class="comment">// as a list</span></span><br><span class="line">@ <span class="type">SMALL</span> |-&gt; <span class="type">LARGE</span></span><br><span class="line">res5: <span class="type">List</span>[<span class="type">Size</span>] = <span class="type">List</span>(<span class="type">Size</span>(<span class="number">0</span>, <span class="string">"SMALL"</span>), <span class="type">Size</span>(<span class="number">1</span>, <span class="string">"MEDIUM"</span>), <span class="type">Size</span>(<span class="number">2</span>, <span class="string">"LARGE"</span>))</span><br><span class="line"><span class="comment">// show</span></span><br><span class="line">@ <span class="type">SMALL</span>.println</span><br><span class="line"><span class="type">SMALL</span></span><br><span class="line"><span class="comment">// max</span></span><br><span class="line">@ implicitly[<span class="type">Enum</span>[<span class="type">Size</span>]].max</span><br><span class="line">res6: <span class="type">Option</span>[<span class="type">Size</span>] = <span class="type">Some</span>(<span class="type">Size</span>(<span class="number">2</span>, <span class="string">"LARGE"</span>))</span><br><span class="line"><span class="comment">// min</span></span><br><span class="line">@ implicitly[<span class="type">Enum</span>[<span class="type">Size</span>]].min</span><br><span class="line">res7: <span class="type">Option</span>[<span class="type">Size</span>] = <span class="type">Some</span>(<span class="type">Size</span>(<span class="number">0</span>, <span class="string">"SMALL"</span>))</span><br></pre></td></tr></table></figure>  
<p>Notice that since we’re using <code>implicitly[]</code>, we don’t have to provide the exact name of the typeclass extending <code>Enum[Size]</code>, the compiler will figure it out from the implicits within scope.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Although Scalaz <code>Enum</code> may seem like a long-winded way to do something trivial, they offer you a lot more flexibility and brevity over vanilla Scala enum. However, I believe that the full force of Scalaz <code>Enum</code> is needed only when you have ordered elements like size. For cases like compass directions, Scala enum are better-suited.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/07/03/scalaz-enum/" data-id="cmgyqxa0c004dmzru5wjq4s7p" data-title="Scalaz Enum" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/07/03/scalaz-enum/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-show" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/01/scalaz-show/" class="article-date">
  <time datetime="2017-07-01T05:31:40.000Z" itemprop="datePublished">2017-07-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/01/scalaz-show/">Scalaz Show</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll look at Scalaz <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/fabab8f699d56279d6f2cc28d02cc2b768e314d7/core/src/main/scala/scalaz/Show.scala"><code>Show</code></a>. The only purpose of this trait is to provide a <code>String</code> representation for its subtypes.  </p>
<h2 id="A-Simple-Example"><a href="#A-Simple-Example" class="headerlink" title="A Simple Example"></a>A Simple Example</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line">@ <span class="number">3.</span>show</span><br><span class="line">res2: <span class="type">Cord</span> = <span class="type">Cord</span>(<span class="number">1</span> [<span class="number">3</span>])</span><br><span class="line">@ <span class="number">3.</span>println</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>  
<p>As always, there are implicits defined for <code>Int</code>, <code>Float</code>, etc. Calling <code>println</code> returns a <code>String</code> whereas calling <code>show</code> returns a <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/fabab8f699d56279d6f2cc28d02cc2b768e314d7/core/src/main/scala/scalaz/Cord.scala"><code>Cord</code></a>. Going over the source code for <code>Cord</code>: </p>
<p><em>A Cord is a purely functional data structure for efficiently storing and manipulating Strings that are potentially very long.</em>  </p>
<h2 id="Why-Use-Show"><a href="#Why-Use-Show" class="headerlink" title="Why Use Show?"></a>Why Use Show?</h2><p>A reasonable question to ask is why use <code>Show</code> when we have a <code>toString</code> which produces a <code>String</code> representation of objects. The answer is that <code>toSring</code> doesn’t always produce a useful representation.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ println(<span class="keyword">new</span> <span class="type">Thread</span>())</span><br><span class="line"><span class="type">Thread</span>[<span class="type">Thread</span><span class="number">-185</span>,<span class="number">5</span>,main]</span><br></pre></td></tr></table></figure>  
<h2 id="Showing-a-Thread"><a href="#Showing-a-Thread" class="headerlink" title="Showing a Thread"></a>Showing a Thread</h2><p>So, let’s create a <code>Show</code> for <code>Thread</code>.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">ThreadShowable</span> <span class="keyword">extends</span> <span class="title">Show</span>[<span class="type">Thread</span>] </span>{</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">shows</span></span>(t: <span class="type">Thread</span>): <span class="type">String</span> = <span class="string">s"Thread Id=<span class="subst">${t.getId}</span> name=<span class="subst">${t.getName}</span>"</span></span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">ThreadShowable</span></span></span><br><span class="line">@ <span class="keyword">val</span> t = <span class="keyword">new</span> <span class="type">Thread</span>()</span><br><span class="line">t: <span class="type">Thread</span> = <span class="type">Thread</span>[<span class="type">Thread</span><span class="number">-322</span>,<span class="number">5</span>,main]</span><br><span class="line"><span class="comment">// Scala way</span></span><br><span class="line">@ println(t)</span><br><span class="line"><span class="type">Thread</span>[<span class="type">Thread</span><span class="number">-322</span>,<span class="number">5</span>,main]</span><br><span class="line"><span class="comment">// Scalaz way</span></span><br><span class="line">@ t.println</span><br><span class="line"><span class="type">Thread</span> <span class="type">Id</span>=<span class="number">352</span> name=<span class="type">Thread</span><span class="number">-322</span></span><br></pre></td></tr></table></figure>  
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p><code>Show</code> is probably not that interesting and probably exists because there is <code>Show</code> class in Haskell<sup><a target="_blank" rel="noopener" href="https://www.haskell.org/tutorial/stdclasses.html">[1]</a></sup>:  </p>
<p><em>The instances of class Show are those types that can be converted to character strings (typically for I/O)</em></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/07/01/scalaz-show/" data-id="cmgyqxa0d0056mzru51it4emb" data-title="Scalaz Show" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/07/01/scalaz-show/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-order" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/29/scalaz-order/" class="article-date">
  <time datetime="2017-06-29T09:00:08.000Z" itemprop="datePublished">2017-06-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/29/scalaz-order/">Scalaz Order</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll look at how to implement ordering using Scalaz <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/fabab8f699d56279d6f2cc28d02cc2b768e314d7/core/src/main/scala/scalaz/Order.scala"><code>Order</code></a> trait. However, before we do that, let’s step back a little and look at how we implement ordering using <a target="_blank" rel="noopener" href="http://www.scala-lang.org/api/current/scala/math/Ordering.html"><code>scala.math.Ordering</code></a>  </p>
<h2 id="Sorting-a-Collection-Scala-Way"><a href="#Sorting-a-Collection-Scala-Way" class="headerlink" title="Sorting a Collection - Scala Way"></a>Sorting a Collection - Scala Way</h2><p>Say we have a <code>List</code> and we’d like to sort it.<sup><a target="_blank" rel="noopener" href="http://alvinalexander.com/scala/how-to-sort-scala-collections-sortwith-sorted-ordered-ordering">[1]</a></sup> We can do so by calling the <code>sorted</code> method on it and it’ll work out-of-the-box for lists of <code>Int</code>, <code>Float</code>, etc. because there is an implicit in <code>scala.math.Ordering</code>.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">-1</span>, <span class="number">0</span>).sorted</span><br><span class="line">res0: <span class="type">List</span>[<span class="type">Int</span>] = <span class="type">List</span>(<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>  
<p>Going over the documentation for <code>scala.math.Ordering</code><sup><a target="_blank" rel="noopener" href="http://www.scala-lang.org/api/current/scala/math/Ordering.html">[2]</a></sup>:  </p>
<p><em>Ordering is a trait whose instances each represent a strategy for sorting instances of a type.<br>Ordering’s companion object defines many implicit objects to deal with subtypes of AnyVal (e.g. Int, Double), String, and others.</em>  </p>
<p>All the implicit objects in the companion object implement the <code>scala.math.Ordering</code> trait which extends the <code>java.util.Comparator</code> interface. Thus, they all have a <code>compare</code> method. What if we have types for which there is no sorting strategy in the companion object of <code>scala.math.Ordering</code>? We define our own like so:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Salary</span>(<span class="params">amt: <span class="type">Float</span></span>)</span></span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">Salary</span></span></span><br><span class="line">@ <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">SalaryOrdered</span> <span class="keyword">extends</span> <span class="title">Ordering</span>[<span class="type">Salary</span>] </span>{</span><br><span class="line">    <span class="comment">// we are using compare on type Float</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">compare</span></span>(a: <span class="type">Salary</span>, b: <span class="type">Salary</span>): <span class="type">Int</span> = a.amt compare b.amt</span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">SalaryOrdered</span></span></span><br><span class="line">@ <span class="type">List</span>(<span class="type">Salary</span>(<span class="number">999.0</span>f), <span class="type">Salary</span>(<span class="number">555.0</span>f)).sorted</span><br><span class="line">res4: <span class="type">List</span>[<span class="type">Salary</span>] = <span class="type">List</span>(<span class="type">Salary</span>(<span class="number">555.0</span>F), <span class="type">Salary</span>(<span class="number">999.0</span>F))</span><br></pre></td></tr></table></figure>  
<p>But we still don’t have operators like <code>&lt;</code>, <code>&lt;=</code>, etc. on type <code>Salary</code>.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="type">Salary</span>(<span class="number">999.0</span>f) &gt; <span class="type">Salary</span>(<span class="number">555.0</span>f)</span><br><span class="line">cmd3.sc:<span class="number">1</span>: value &gt; is not a member of ammonite.$sess.cmd0.<span class="type">Salary</span></span><br><span class="line"><span class="keyword">val</span> res3 = <span class="type">Salary</span>(<span class="number">999.0</span>f) &gt; <span class="type">Salary</span>(<span class="number">555.0</span>f)</span><br><span class="line">                          ^</span><br><span class="line"><span class="type">Compilation</span> <span class="type">Failed</span></span><br></pre></td></tr></table></figure>  
<p>To do that, the trait <code>scala.math.Ordered</code> would have to be mixed in.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Salary</span>(<span class="params">amt: <span class="type">Float</span></span>) <span class="keyword">extends</span> <span class="title">Ordered</span>[<span class="type">Salary</span>] </span>{</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">compare</span></span>(that: <span class="type">Salary</span>): <span class="type">Int</span> = <span class="keyword">this</span>.amt compare that.amt</span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">Salary</span></span></span><br><span class="line">@ <span class="type">Salary</span>(<span class="number">1.0</span>f) &lt; <span class="type">Salary</span>(<span class="number">2.0</span>f)</span><br><span class="line">res1: <span class="type">Boolean</span> = <span class="literal">true</span></span><br><span class="line">@ <span class="type">List</span>(<span class="type">Salary</span>(<span class="number">2.0</span>f), <span class="type">Salary</span>(<span class="number">2.0</span>f), <span class="type">Salary</span>(<span class="number">1.0</span>f)).sorted</span><br><span class="line">res2: <span class="type">List</span>[<span class="type">Salary</span>] = <span class="type">List</span>(<span class="type">Salary</span>(<span class="number">1.0</span>F), <span class="type">Salary</span>(<span class="number">2.0</span>F), <span class="type">Salary</span>(<span class="number">2.0</span>F))</span><br></pre></td></tr></table></figure>  
<p>And we know that if we’re working with a library, we do not have the liberty to mix a trait for our convenience. Also, Scala’s comparison operators are not type safe.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1</span> &gt; <span class="number">2.0</span></span><br><span class="line">res4: <span class="type">Boolean</span> = <span class="literal">false</span></span><br></pre></td></tr></table></figure>  
<h2 id="Sorting-a-Collection-Scalaz-Way"><a href="#Sorting-a-Collection-Scalaz-Way" class="headerlink" title="Sorting a Collection - Scalaz Way"></a>Sorting a Collection - Scalaz Way</h2><p>As stated before, Scalaz provides <code>Order</code> trait. Staying with our <code>Salary</code> example, let’s put Scalaz <code>Order</code> to use.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line">@ <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Salary</span>(<span class="params">amt: <span class="type">Float</span></span>)</span></span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">Salary</span></span></span><br><span class="line">@ <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">SalaryOrder</span> <span class="keyword">extends</span> <span class="title">Order</span>[<span class="type">Salary</span>] </span>{</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">order</span></span>(a: <span class="type">Salary</span>, b: <span class="type">Salary</span>): <span class="type">Ordering</span> = {</span><br><span class="line">      a.amt compare b.amt <span class="keyword">match</span> {</span><br><span class="line">        <span class="keyword">case</span> <span class="number">-1</span> =&gt; <span class="type">Ordering</span>.<span class="type">LT</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span> =&gt; <span class="type">Ordering</span>.<span class="type">EQ</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span> =&gt; <span class="type">Ordering</span>.<span class="type">GT</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">SalaryOrder</span></span></span><br></pre></td></tr></table></figure>
<p>We’ve defined a way to order <code>Salary</code> objects using Scalaz <code>Order</code> trait via a typeclass. The implicit object needs to provide an implementation for <code>order</code> method which returns an <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/fabab8f699d56279d6f2cc28d02cc2b768e314d7/core/src/main/scala/scalaz/Ordering.scala"><code>Ordering</code></a> value. Going over the code for Scalaz <code>Ordering</code>: </p>
<p><em>This Ordering is analogous to the Ints returned by scala.math.Ordering.</em>  </p>
<p>Now, we have comparison operators at our disposal. Here’s how we can compare <code>Salary</code> objects using the <code>?|?</code> operator:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="type">Salary</span>(<span class="number">1.0</span>f) ?|? <span class="type">Salary</span>(<span class="number">2.0</span>f)</span><br><span class="line">res4: <span class="type">Ordering</span> = <span class="type">LT</span></span><br></pre></td></tr></table></figure>  
<p><code>?|?</code> can also be used with <code>Int</code>, <code>Float</code>, etc. and is type-safe.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1.0</span> ?|? <span class="number">2.0</span></span><br><span class="line">res5: <span class="type">Ordering</span> = <span class="type">LT</span></span><br><span class="line">@ <span class="number">1.0</span> ?!? <span class="number">2</span></span><br><span class="line">cmd6.sc:<span class="number">1</span>: value ?!? is not a member of <span class="type">Double</span></span><br><span class="line"><span class="keyword">val</span> res6 = <span class="number">1.0</span> ?!? <span class="number">2</span></span><br><span class="line">               ^</span><br><span class="line"><span class="type">Compilation</span> <span class="type">Failed</span></span><br></pre></td></tr></table></figure>  
<p>Also, analogous to <code>&lt;</code>, <code>&lt;=</code>, we now have type-safe <code>lt</code>, <code>lte</code>, etc.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1.0</span> gte <span class="number">2.0</span></span><br><span class="line">res6: <span class="type">Boolean</span> = <span class="literal">false</span></span><br><span class="line">@ <span class="number">1</span> gt <span class="number">2.0</span></span><br><span class="line">cmd8.sc:<span class="number">1</span>: <span class="class"><span class="keyword">type</span> <span class="title">mismatch</span></span>;</span><br><span class="line"> found   : <span class="type">Double</span>(<span class="number">2.0</span>)</span><br><span class="line"> required: <span class="type">Int</span></span><br><span class="line"><span class="keyword">val</span> res8 = <span class="number">1</span> gt <span class="number">2.0</span></span><br><span class="line">                ^</span><br><span class="line"><span class="type">Compilation</span> <span class="type">Failed</span></span><br></pre></td></tr></table></figure>
<p>That’s not where the power ends. You can also compare <code>Option</code>s seamlessly. Do note that it is <code>some</code> with a lowercase “s”.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ some(<span class="type">Salary</span>(<span class="number">1.0</span>f)) ?|? some(<span class="type">Salary</span>(<span class="number">2.0</span>f))</span><br><span class="line">res8: <span class="type">Ordering</span> = <span class="type">LT</span></span><br></pre></td></tr></table></figure>  
<p>You can now also use <code>sorted</code> on a collection equally easily. Using <code>Order[A].toScalaOrdering</code> we can get back an object of type <code>scala.math.Ordering</code> which we can use to sort collections. </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">implicit</span> <span class="keyword">val</span> salaryOrdering = <span class="type">Order</span>[<span class="type">Salary</span>].toScalaOrdering</span><br><span class="line">salaryOrdering: math.<span class="type">Ordering</span>[<span class="type">Salary</span>] = scalaz.<span class="type">Order</span>$$anon$<span class="number">1</span>@<span class="number">5</span>b8a5d7c</span><br><span class="line">@ <span class="type">List</span>(<span class="type">Salary</span>(<span class="number">2.0</span>f), <span class="type">Salary</span>(<span class="number">1.0</span>f), <span class="type">Salary</span>(<span class="number">0.0</span>f)).sorted</span><br><span class="line">res10: <span class="type">List</span>[<span class="type">Salary</span>] = <span class="type">List</span>(<span class="type">Salary</span>(<span class="number">0.0</span>F), <span class="type">Salary</span>(<span class="number">1.0</span>F), <span class="type">Salary</span>(<span class="number">2.0</span>F))</span><br></pre></td></tr></table></figure>  
<p>Also, since <code>Order</code> trait extends the <code>Equal</code> trait, you get the <code>===</code> operator, too.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="type">Salary</span>(<span class="number">0.0</span>F) === <span class="type">Salary</span>(<span class="number">1.0</span>F)</span><br><span class="line">res11: <span class="type">Boolean</span> = <span class="literal">false</span></span><br></pre></td></tr></table></figure>  
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>By using Scalaz <code>Order</code> trait, we can implement comparison between values in a type-safe and extensible way. There’s seamless transformation from Scalaz <code>Order</code> to <code>scala.math.Ordering</code> which lets us use the <code>sorted</code> method on collections.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/06/29/scalaz-order/" data-id="cmgyqxa0d0054mzru1p0l3ea4" data-title="Scalaz Order" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/06/29/scalaz-order/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-scalaz-equals" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/28/scalaz-equals/" class="article-date">
  <time datetime="2017-06-28T15:03:52.000Z" itemprop="datePublished">2017-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/28/scalaz-equals/">Scalaz Equal</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this post we’ll finally start using Scalaz. We’ll look at how to get Scalaz using <code>sbt</code> and look at how it provides us with type-safe equality checking.  </p>
<h2 id="Getting-Scalaz"><a href="#Getting-Scalaz" class="headerlink" title="Getting Scalaz"></a>Getting Scalaz</h2><p>Add the following line to your <code>build.sbt</code> file:  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libraryDependencies += <span class="string">"org.scalaz"</span> %% <span class="string">"scalaz-core"</span> % <span class="string">"7.2.14"</span></span><br></pre></td></tr></table></figure>  
<p><hr> </p>
<h5 id="NOTE"><a href="#NOTE" class="headerlink" title="NOTE:"></a>NOTE:</h5><p>I highly recommend <a target="_blank" rel="noopener" href="http://ammonite.io/">Ammonite Scala REPL</a>. It provides a lot of improvements over the standard REPL like being able to import library dependencies straight from the console. I’ll be using Ammonite REPL henceforth because it’ll help me keep the examples in the REPL. However, there isn’t any difference beyond how to get the dependencies.</p>
<hr>  

<h2 id="Fire-Up-the-REPL"><a href="#Fire-Up-the-REPL" class="headerlink" title="Fire Up the REPL"></a>Fire Up the REPL</h2><p>No matter what your preferred REPL is, let’s get started.  </p>
<h3 id="Standard-REPL"><a href="#Standard-REPL" class="headerlink" title="Standard REPL"></a>Standard REPL</h3><p>Start the REPL by executing <code>sbt console</code>. Then, execute the following:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br></pre></td></tr></table></figure>  
<h3 id="Ammonite"><a href="#Ammonite" class="headerlink" title="Ammonite"></a>Ammonite</h3><p>Start the REPL by executing the <code>amm</code> command. Then, execute the following:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">import</span> $ivy.`org.scalaz::scalaz-core:<span class="number">7.2</span><span class="number">.14</span>`</span><br><span class="line"><span class="keyword">import</span> $ivy.$</span><br><span class="line">@ <span class="keyword">import</span> scalaz._</span><br><span class="line"><span class="keyword">import</span> scalaz._</span><br><span class="line">@ <span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br><span class="line"><span class="keyword">import</span> <span class="type">Scalaz</span>._</span><br></pre></td></tr></table></figure>
<h2 id="Equality-Checking"><a href="#Equality-Checking" class="headerlink" title="Equality Checking"></a>Equality Checking</h2><p>We can compare two values in Scala using <code>==</code> (double equals). The issue, however, is that it will let us compare unrelated types like a string with an integer and such a comparison would always yield false.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1</span> == <span class="string">"1"</span></span><br><span class="line">res3: <span class="type">Boolean</span> = <span class="literal">false</span></span><br></pre></td></tr></table></figure>  
<p>The <code>==</code> operator that Scala provides is a null-safe comparison operator and not type-safe. What if we want type-safety, too? This is where Scalaz’s <code>===</code> (triple equals) comes in. It’ll complain when you try to compare unrelated types.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1</span> === <span class="string">"1"</span></span><br><span class="line">cmd4.sc:<span class="number">1</span>: <span class="class"><span class="keyword">type</span> <span class="title">mismatch</span></span>;</span><br><span class="line"> found   : <span class="type">String</span>(<span class="string">"1"</span>)</span><br><span class="line"> required: <span class="type">Int</span></span><br><span class="line"><span class="keyword">val</span> res4 = <span class="number">1</span> === <span class="string">"1"</span></span><br><span class="line">                 ^</span><br><span class="line"><span class="type">Compilation</span> <span class="type">Failed</span></span><br></pre></td></tr></table></figure>  
<p>Similarly, we can check for inequalities. The Scala operator <code>!=</code> is null-safe but not type-safe.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1</span> != <span class="string">"1"</span></span><br><span class="line">res4: <span class="type">Boolean</span> = <span class="literal">true</span></span><br></pre></td></tr></table></figure>  
<p>Here’s the Scalaz way to check for inequality using <code>=/=</code> operator which is both type-safe and null-safe:  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="number">1</span> =/= <span class="string">"1"</span></span><br><span class="line">cmd5.sc:<span class="number">1</span>: <span class="class"><span class="keyword">type</span> <span class="title">mismatch</span></span>;</span><br><span class="line"> found   : <span class="type">String</span>(<span class="string">"1"</span>)</span><br><span class="line"> required: <span class="type">Int</span></span><br><span class="line"><span class="keyword">val</span> res5 = <span class="number">1</span> =/= <span class="string">"1"</span></span><br><span class="line">                 ^</span><br><span class="line"><span class="type">Compilation</span> <span class="type">Failed</span></span><br></pre></td></tr></table></figure>  
<h2 id="Under-the-Hoods"><a href="#Under-the-Hoods" class="headerlink" title="Under the Hoods"></a>Under the Hoods</h2><p>As always, there are type classes at play here. There is an <a target="_blank" rel="noopener" href="https://github.com/scalaz/scalaz/blob/fabab8f699d56279d6f2cc28d02cc2b768e314d7/core/src/main/scala/scalaz/Equal.scala"><code>Equal</code></a> trait which provides an <code>equal</code> to check if the two values are equal and of the same type.  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">equal</span></span>(a1: <span class="type">F</span>, a2: <span class="type">F</span>): <span class="type">Boolean</span></span><br></pre></td></tr></table></figure>  
<p>Since all this magic is done using type classes, how about we put it to use and write code to compare two <code>Person</code> objects?  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@ <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">id: <span class="type">Int</span>, name: <span class="type">String</span></span>)</span></span><br><span class="line">defined <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></span><br><span class="line">@ <span class="keyword">implicit</span> <span class="class"><span class="keyword">object</span> <span class="title">PersonEquals</span> <span class="keyword">extends</span> <span class="title">Equal</span>[<span class="type">Person</span>] </span>{</span><br><span class="line">    <span class="comment">// we are using Scalaz === internally</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">equal</span></span>(a1: <span class="type">Person</span>, a2: <span class="type">Person</span>): <span class="type">Boolean</span> = a1.id === a2.id &amp;&amp; a1.name === a2.name </span><br><span class="line">  }</span><br><span class="line">defined <span class="class"><span class="keyword">object</span> <span class="title">PersonEquals</span></span></span><br><span class="line">@ <span class="type">Person</span>(<span class="number">1</span>, <span class="string">"John"</span>) === <span class="type">Person</span>(<span class="number">2</span>, <span class="string">"Jane"</span>)</span><br><span class="line">res7: <span class="type">Boolean</span> = <span class="literal">false</span></span><br><span class="line">@ <span class="type">Person</span>(<span class="number">1</span>, <span class="string">"John"</span>) =/= <span class="type">Person</span>(<span class="number">2</span>, <span class="string">"Jane"</span>)</span><br><span class="line">res8: <span class="type">Boolean</span> = <span class="literal">true</span></span><br></pre></td></tr></table></figure>  
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Scalaz <code>===</code> lets you check for equality in a type-safe way. More often than not, this is what you need. Trying to compare values of dissimilar types is usually not needed. Using <code>===</code> ensures that such comparisons lead to errors at compile-time instead of waiting for them to surface at run-time. This makes debugging much more efficient.</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://fasihkhatib.com/2017/06/28/scalaz-equals/" data-id="cmgyqxa0c004kmzru3899bekw" data-title="Scalaz Equal" class="article-share-link">Share</a>
      
        <a href="http://fasihkhatib.com/2017/06/28/scalaz-equals/#disqus_thread" class="article-comment-link">Comments</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scalaz/" rel="tag">scalaz</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/6/">← Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/8/">Next →</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/PRD/" style="font-size: 10px;">PRD</a> <a href="/tags/algorithms/" style="font-size: 11.11px;">algorithms</a> <a href="/tags/architecture/" style="font-size: 20px;">architecture</a> <a href="/tags/category-theory/" style="font-size: 13.33px;">category theory</a> <a href="/tags/clojure/" style="font-size: 11.11px;">clojure</a> <a href="/tags/compilers/" style="font-size: 13.33px;">compilers</a> <a href="/tags/epi/" style="font-size: 13.33px;">epi</a> <a href="/tags/functional-programming/" style="font-size: 18.89px;">functional programming</a> <a href="/tags/machine-learning/" style="font-size: 14.44px;">machine learning</a> <a href="/tags/math/" style="font-size: 12.22px;">math</a> <a href="/tags/misc/" style="font-size: 15.56px;">misc</a> <a href="/tags/python/" style="font-size: 13.33px;">python</a> <a href="/tags/scala/" style="font-size: 17.78px;">scala</a> <a href="/tags/scalaz/" style="font-size: 16.67px;">scalaz</a> <a href="/tags/testing/" style="font-size: 11.11px;">testing</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/10/17/Writing-a-PRD-Restaurant-Reservations/">Writing a PRD - Curated Menus at Restaurants</a>
          </li>
        
          <li>
            <a href="/2025/06/25/Real-time-restaurant-recommendations/">Real-time Restaurant Recommendations</a>
          </li>
        
          <li>
            <a href="/2025/01/12/Creating-a-realtime-data-platform-indexing/">Creating a realtime data platform - indexing</a>
          </li>
        
          <li>
            <a href="/2025/01/10/Creating-a-realtime-data-platform-embedding/">Creating a realtime data platform - embedding</a>
          </li>
        
          <li>
            <a href="/2025/01/06/Creating-a-realtime-data-platform-visualization/">Creating a realtime data platform - visualization</a>
          </li>
        
          <li>
            <a href="/2025/01/04/Creating-a-realtime-data-platform-orchestration/">Creating a realtime data platform - orchestration</a>
          </li>
        
          <li>
            <a href="/2025/01/02/Creating-a-realtime-data-platform-SQL/">Creating a realtime data platform - SQL</a>
          </li>
        
          <li>
            <a href="/2024/12/27/Creating-a-realtime-data-platform-nullability/">Creating a realtime data platform - nullability</a>
          </li>
        
          <li>
            <a href="/2024/12/26/Creating-a-realtime-data-platform-evolving-the-schema/">Creating a realtime data platform - evolving the schema</a>
          </li>
        
          <li>
            <a href="/2024/12/24/Creating-a-realtime-data-platform-bringing-data-in/">Creating a realtime data platform - bringing data in</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2025 Fasih Khatib<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About Me</a>
  
    <a href="/principles" class="mobile-nav-link">Guiding Principles</a>
  
</nav>
    
<script>
  var disqus_shortname = 'https-thescalaguy-github-io';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>



<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>